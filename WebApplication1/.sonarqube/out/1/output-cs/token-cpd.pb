‡ë
$D:\Hotpot\WebApplication1\Program.cs
	namespace 	
WebApplication1
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
var 
builder 
= 
WebApplication (
.( )
CreateBuilder) 6
(6 7
args7 ;
); <
;< =
builder 
. 
Services 
. 
AddCors $
($ %
options% ,
=>- /
{ 
options 
. 
	AddPolicy !
(! "
$str" 2
,2 3
builder 
=> 
builder &
.   
AllowAnyOrigin   #
(  # $
)  $ %
.!! 
AllowAnyMethod!! #
(!!# $
)!!$ %
."" 
AllowAnyHeader"" #
(""# $
)""$ %
)""% &
;""& '
}$$ 
)$$ 
;$$ 
var(( 
key(( 
=(( 
builder(( 
.(( 
Configuration(( +
.((+ ,
GetValue((, 4
<((4 5
string((5 ;
>((; <
(((< =
$str((= Q
)((Q R
;((R S
builder** 
.** 
Services** 
.** 
AddAuthentication** .
(**. /
x**/ 0
=>**1 3
{++ 
x,, 
.,, %
DefaultAuthenticateScheme,, +
=,,, -
JwtBearerDefaults,,. ?
.,,? @ 
AuthenticationScheme,,@ T
;,,T U
x-- 
.-- "
DefaultChallengeScheme-- (
=--) *
JwtBearerDefaults--+ <
.--< = 
AuthenticationScheme--= Q
;--Q R
}.. 
).. 
.// 
AddJwtBearer// 
(// 
x// 
=>// 
{00 
x11 
.11  
RequireHttpsMetadata11 &
=11' (
false11) .
;11. /
x22 
.22 
	SaveToken22 
=22 
true22 "
;22" #
x33 
.33 %
TokenValidationParameters33 +
=33, -
new33. 1%
TokenValidationParameters332 K
{44 $
ValidateIssuerSigningKey55 ,
=55- .
true55/ 3
,553 4
IssuerSigningKey66 $
=66% &
new66' * 
SymmetricSecurityKey66+ ?
(66? @
Encoding66@ H
.66H I
ASCII66I N
.66N O
GetBytes66O W
(66W X
key66X [
)66[ \
)66\ ]
,66] ^
ValidateIssuer77 "
=77# $
false77% *
,77* +
ValidateAudience88 $
=88% &
false88' ,
}99 
;99 
}:: 
):: 
;:: 
builder<< 
.<< 
Services<< 
.<< 
AddSwaggerGen<< *
(<<* +
c<<+ ,
=><<- /
{== 
c>> 
.>> !
AddSecurityDefinition>> '
(>>' (
$str>>( 0
,>>0 1
new>>2 5!
OpenApiSecurityScheme>>6 K
{?? 
Description@@ 
=@@  !
$str@@" t
,@@t u
NameAA 
=AA 
$strAA *
,AA* +
InBB 
=BB 
ParameterLocationBB *
.BB* +
HeaderBB+ 1
,BB1 2
TypeCC 
=CC 
SecuritySchemeTypeCC -
.CC- .
ApiKeyCC. 4
,CC4 5
SchemeDD 
=DD 
$strDD %
}EE 
)EE 
;EE 
cGG 
.GG "
AddSecurityRequirementGG (
(GG( )
newGG) ,&
OpenApiSecurityRequirementGG- G
{HH 
{II 
newJJ !
OpenApiSecuritySchemeJJ 1
{KK 
	ReferenceLL %
=LL& '
newLL( +
OpenApiReferenceLL, <
{MM 
TypeNN  $
=NN% &
ReferenceTypeNN' 4
.NN4 5
SecuritySchemeNN5 C
,NNC D
IdOO  "
=OO# $
$strOO% -
}PP 
,PP 
SchemeQQ "
=QQ# $
$strQQ% -
,QQ- .
NameRR  
=RR! "
$strRR# +
,RR+ ,
InSS 
=SS  
ParameterLocationSS! 2
.SS2 3
HeaderSS3 9
}TT 
,TT 
newUU 
ListUU  
<UU  !
stringUU! '
>UU' (
(UU( )
)UU) *
}VV 
}WW 
)WW 
;WW 
}XX 
)XX 
;XX 
builder[[ 
.[[ 
Services[[ 
.[[ 
AddDbContext[[ )
<[[) *
AppDbContext[[* 6
>[[6 7
([[7 8
options[[8 ?
=>[[@ B
options\\ 
.\\ 
UseSqlServer\\ $
(\\$ %
builder\\% ,
.\\, -
Configuration\\- :
.\\: ;
GetConnectionString\\; N
(\\N O
$str\\O b
)\\b c
)\\c d
)\\d e
;\\e f
var__ 
logRepository__ 
=__ 

LogManager__  *
.__* +
GetRepository__+ 8
(__8 9
System__9 ?
.__? @

Reflection__@ J
.__J K
Assembly__K S
.__S T
GetEntryAssembly__T d
(__d e
)__e f
)__f g
;__g h
XmlConfigurator`` 
.`` 
	Configure`` %
(``% &
logRepository``& 3
,``3 4
new``5 8
FileInfo``9 A
(``A B
$str``B R
)``R S
)``S T
;``T U
buildercc 
.cc 
Servicescc 
.cc 
	AddScopedcc &
<cc& '
IAdminDashboardcc' 6
,cc6 7$
AdminDashboardRepositorycc8 P
>ccP Q
(ccQ R
)ccR S
;ccS T
builderdd 
.dd 
Servicesdd 
.dd 
	AddScopeddd &
<dd& '!
AdminDashboardServicedd' <
>dd< =
(dd= >
)dd> ?
;dd? @
builderee 
.ee 
Servicesee 
.ee 
	AddScopedee &
<ee& '
ICheckoutMediatoree' 8
,ee8 9
CheckoutMediatoree: J
>eeJ K
(eeK L
)eeL M
;eeM N
builderff 
.ff 
Servicesff 
.ff 
	AddScopedff &
<ff& '
CheckoutServiceff' 6
>ff6 7
(ff7 8
)ff8 9
;ff9 :
builderhh 
.hh 
Serviceshh 
.hh 
	AddScopedhh &
<hh& '
IUserRepositoryhh' 6
,hh6 7
UserRepositoryhh8 F
>hhF G
(hhG H
)hhH I
;hhI J
builderii 
.ii 
Servicesii 
.ii 
	AddScopedii &
<ii& '
UserServiceii' 2
>ii2 3
(ii3 4
)ii4 5
;ii5 6
builderjj 
.jj 
Servicesjj 
.jj 
	AddScopedjj &
<jj& '!
IRestaurantRepositoryjj' <
,jj< = 
RestaurantRepositoryjj> R
>jjR S
(jjS T
)jjT U
;jjU V
builderkk 
.kk 
Serviceskk 
.kk 
	AddScopedkk &
<kk& '
RestaurantServicekk' 8
>kk8 9
(kk9 :
)kk: ;
;kk; <
builderll 
.ll 
Servicesll 
.ll 
	AddScopedll &
<ll& '
IMenuRepositoryll' 6
,ll6 7
MenuRepositoryll8 F
>llF G
(llG H
)llH I
;llI J
buildermm 
.mm 
Servicesmm 
.mm 
	AddScopedmm &
<mm& '
MenuServicemm' 2
>mm2 3
(mm3 4
)mm4 5
;mm5 6
buildernn 
.nn 
Servicesnn 
.nn 
	AddScopednn &
<nn& '
IMenuItemRepositorynn' :
,nn: ;
MenuItemRepositorynn< N
>nnN O
(nnO P
)nnP Q
;nnQ R
builderoo 
.oo 
Servicesoo 
.oo 
	AddScopedoo &
<oo& '
MenuItemServiceoo' 6
>oo6 7
(oo7 8
)oo8 9
;oo9 :
builderqq 
.qq 
Servicesqq 
.qq 
	AddScopedqq &
<qq& '
IOrderInterfaceqq' 6
,qq6 7
OrderRepositoryqq8 G
>qqG H
(qqH I
)qqI J
;qqJ K
builderrr 
.rr 
Servicesrr 
.rr 
	AddScopedrr &
<rr& '
OrderServicerr' 3
>rr3 4
(rr4 5
)rr5 6
;rr6 7
builderss 
.ss 
Servicesss 
.ss 
	AddScopedss &
<ss& '!
IOrderDetailInterfacess' <
,ss< ="
OrderDetailsRepositoryss> T
>ssT U
(ssU V
)ssV W
;ssW X
buildertt 
.tt 
Servicestt 
.tt 
	AddScopedtt &
<tt& '
OrderDetailsServicett' :
>tt: ;
(tt; <
)tt< =
;tt= >
builderuu 
.uu 
Servicesuu 
.uu 
	AddScopeduu &
<uu& '
IPaymentInterfaceuu' 8
,uu8 9
PaymentRepositoryuu: K
>uuK L
(uuL M
)uuM N
;uuN O
buildervv 
.vv 
Servicesvv 
.vv 
	AddScopedvv &
<vv& '
PaymentsServicevv' 6
>vv6 7
(vv7 8
)vv8 9
;vv9 :
builderww 
.ww 
Servicesww 
.ww 
	AddScopedww &
<ww& '$
IFeedbackRatingInterfaceww' ?
,ww? @$
FeedbackRatingRepositorywwA Y
>wwY Z
(wwZ [
)ww[ \
;ww\ ]
builderxx 
.xx 
Servicesxx 
.xx 
	AddScopedxx &
<xx& '"
FeedbackRatingsServicexx' =
>xx= >
(xx> ?
)xx? @
;xx@ A
builderyy 
.yy 
Servicesyy 
.yy 
	AddScopedyy &
<yy& '
ICartInterfaceyy' 5
,yy5 6
CartRepositoryyy7 E
>yyE F
(yyF G
)yyG H
;yyH I
builderzz 
.zz 
Serviceszz 
.zz 
	AddScopedzz &
<zz& '
CartServicezz' 2
>zz2 3
(zz3 4
)zz4 5
;zz5 6
builder{{ 
.{{ 
Services{{ 
.{{ 
	AddScoped{{ &
<{{& '
IRestaurantMenuItem{{' :
,{{: ;(
RestaurantMenuItemRepository{{< X
>{{X Y
({{Y Z
){{Z [
;{{[ \
builder|| 
.|| 
Services|| 
.|| 
	AddScoped|| &
<||& '%
RestaurantMenuItemService||' @
>||@ A
(||A B
)||B C
;||C D
builder}} 
.}} 
Services}} 
.}} 
	AddScoped}} &
<}}& '
IRestaurantMenuItem}}' :
,}}: ;(
RestaurantMenuItemRepository}}< X
>}}X Y
(}}Y Z
)}}Z [
;}}[ \
builder~~ 
.~~ 
Services~~ 
.~~ 
	AddScoped~~ &
<~~& '%
RestaurantMenuItemService~~' @
>~~@ A
(~~A B
)~~B C
;~~C D
builder
ÅÅ 
.
ÅÅ 
Services
ÅÅ 
.
ÅÅ 
	AddScoped
ÅÅ &
<
ÅÅ& '
IReportRepository
ÅÅ' 8
,
ÅÅ8 9
ReportRepository
ÅÅ: J
>
ÅÅJ K
(
ÅÅK L
)
ÅÅL M
;
ÅÅM N
builder
ÇÇ 
.
ÇÇ 
Services
ÇÇ 
.
ÇÇ 
	AddScoped
ÇÇ &
<
ÇÇ& '
ReportService
ÇÇ' 4
>
ÇÇ4 5
(
ÇÇ5 6
)
ÇÇ6 7
;
ÇÇ7 8
builder
ÑÑ 
.
ÑÑ 
Services
ÑÑ 
.
ÑÑ 
	AddScoped
ÑÑ &
<
ÑÑ& '
IEmailService
ÑÑ' 4
,
ÑÑ4 5
GmailService
ÑÑ6 B
>
ÑÑB C
(
ÑÑC D
)
ÑÑD E
;
ÑÑE F
builder
áá 
.
áá 
Services
áá 
.
áá 
	AddScoped
áá &
<
áá& '!
NotificationService
áá' :
>
áá: ;
(
áá; <
)
áá< =
;
áá= >
builder
ââ 
.
ââ 
Services
ââ 
.
ââ 
	AddScoped
ââ &
<
ââ& '
IReportsService
ââ' 6
,
ââ6 7
ReportsService
ââ8 F
>
ââF G
(
ââG H
)
ââH I
;
ââI J
builder
ãã 
.
ãã 
Services
ãã 
.
ãã 
	AddScoped
ãã &
<
ãã& '
ActionFilter
ãã' 3
>
ãã3 4
(
ãã4 5
)
ãã5 6
;
ãã6 7
builder
åå 
.
åå 
Services
åå 
.
åå 
AddControllers
åå +
(
åå+ ,
options
åå, 3
=>
åå4 6
{
çç 
options
èè 
.
èè 
Filters
èè 
.
èè  
Add
èè  #
<
èè# $
ActionFilter
èè$ 0
>
èè0 1
(
èè1 2
)
èè2 3
;
èè3 4
}
êê 
)
êê 
;
êê 
builder
ìì 
.
ìì 
Services
ìì 
.
ìì 
AddControllers
ìì +
(
ìì+ ,
options
ìì, 3
=>
ìì4 6
{
îî 
options
ïï 
.
ïï 
Filters
ïï 
.
ïï  
Add
ïï  #
<
ïï# $#
GlobalExceptionFilter
ïï$ 9
>
ïï9 :
(
ïï: ;
)
ïï; <
;
ïï< =
}
ññ 
)
ññ 
;
ññ 
builder
öö 
.
öö 
Services
öö 
.
öö %
AddEndpointsApiExplorer
öö 4
(
öö4 5
)
öö5 6
;
öö6 7
builder
õõ 
.
õõ 
Services
õõ 
.
õõ 
AddSwaggerGen
õõ *
(
õõ* +
)
õõ+ ,
;
õõ, -
builder
ùù 
.
ùù 
Services
ùù 
.
ùù 
AddApiVersioning
ùù -
(
ùù- .
options
ùù. 5
=>
ùù6 8
{
ûû 
options
üü 
.
üü 
ReportApiVersions
üü )
=
üü* +
true
üü, 0
;
üü0 1
options
†† 
.
†† 
DefaultApiVersion
†† )
=
††* +
new
††, /

ApiVersion
††0 :
(
††: ;
$num
††; <
,
††< =
$num
††> ?
)
††? @
;
††@ A
options
°° 
.
°° 1
#AssumeDefaultVersionWhenUnspecified
°° ;
=
°°< =
true
°°> B
;
°°B C
options
¢¢ 
.
¢¢ 
ApiVersionReader
¢¢ (
=
¢¢) *
new
¢¢+ .(
UrlSegmentApiVersionReader
¢¢/ I
(
¢¢I J
)
¢¢J K
;
¢¢K L
}
££ 
)
££ 
.
££ 
AddApiExplorer
££ 
(
££ 
options
££ %
=>
££& (
{
§§ 
options
•• 
.
•• 
GroupNameFormat
•• '
=
••( )
$str
••* 2
;
••2 3
options
¶¶ 
.
¶¶ '
SubstituteApiVersionInUrl
¶¶ 1
=
¶¶2 3
true
¶¶4 8
;
¶¶8 9
}
ßß 
)
ßß 
;
ßß 
builder
™™ 
.
™™ 
Services
™™ 
.
™™ 
AddSwaggerGen
™™ *
(
™™* +
c
™™+ ,
=>
™™- /
{
´´ 
c
¨¨ 
.
¨¨ 

SwaggerDoc
¨¨ 
(
¨¨ 
$str
¨¨ !
,
¨¨! "
new
¨¨# &
OpenApiInfo
¨¨' 2
{
¨¨3 4
Title
¨¨5 :
=
¨¨; <
$str
¨¨= E
,
¨¨E F
Version
¨¨G N
=
¨¨O P
$str
¨¨Q U
}
¨¨V W
)
¨¨W X
;
¨¨X Y
c
≠≠ 
.
≠≠ 

SwaggerDoc
≠≠ 
(
≠≠ 
$str
≠≠ !
,
≠≠! "
new
≠≠# &
OpenApiInfo
≠≠' 2
{
≠≠3 4
Title
≠≠5 :
=
≠≠; <
$str
≠≠= E
,
≠≠E F
Version
≠≠G N
=
≠≠O P
$str
≠≠Q U
}
≠≠V W
)
≠≠W X
;
≠≠X Y
}
ØØ 
)
ØØ 
;
ØØ 
var
≤≤ 
app
≤≤ 
=
≤≤ 
builder
≤≤ 
.
≤≤ 
Build
≤≤ #
(
≤≤# $
)
≤≤$ %
;
≤≤% &
if
µµ 
(
µµ 
app
µµ 
.
µµ 
Environment
µµ 
.
µµ  
IsDevelopment
µµ  -
(
µµ- .
)
µµ. /
)
µµ/ 0
{
∂∂ 
app
∑∑ 
.
∑∑ 

UseSwagger
∑∑ 
(
∑∑ 
)
∑∑  
;
∑∑  !
app
∏∏ 
.
∏∏ 
UseSwaggerUI
∏∏  
(
∏∏  !
c
∏∏! "
=>
∏∏# %
{
ππ 
c
∫∫ 
.
∫∫ 
SwaggerEndpoint
∫∫ %
(
∫∫% &
$str
∫∫& @
,
∫∫@ A
$str
∫∫B J
)
∫∫J K
;
∫∫K L
c
ªª 
.
ªª 
SwaggerEndpoint
ªª %
(
ªª% &
$str
ªª& @
,
ªª@ A
$str
ªªB J
)
ªªJ K
;
ªªK L
}
ºº 
)
ºº 
;
ºº 
}
ΩΩ 
app
øø 
.
øø !
UseHttpsRedirection
øø #
(
øø# $
)
øø$ %
;
øø% &
app
¿¿ 
.
¿¿ 
UseCors
¿¿ 
(
¿¿ 
$str
¿¿ (
)
¿¿( )
;
¿¿) *
app
¡¡ 
.
¡¡ 
UseAuthentication
¡¡ !
(
¡¡! "
)
¡¡" #
;
¡¡# $
app
¬¬ 
.
¬¬ 
UseAuthorization
¬¬  
(
¬¬  !
)
¬¬! "
;
¬¬" #
app
√√ 
.
√√ 
MapControllers
√√ 
(
√√ 
)
√√  
;
√√  !
app
ƒƒ 
.
ƒƒ 
Run
ƒƒ 
(
ƒƒ 
)
ƒƒ 
;
ƒƒ 
}
≈≈ 	
}
∆∆ 
}«« ¶q
2D:\Hotpot\WebApplication1\GlobalExceptionFilter.cs
public 
class !
GlobalExceptionFilter "
:# $
IExceptionFilter% 5
{		 
private

 
static

 
readonly

 
ILog

  
_logger

! (
=

) *

LogManager

+ 5
.

5 6
	GetLogger

6 ?
(

? @
typeof

@ F
(

F G!
GlobalExceptionFilter

G \
)

\ ]
)

] ^
;

^ _
public 

void 
OnException 
( 
ExceptionContext ,
context- 4
)4 5
{ 
ObjectResult 
response 
= 
null  $
;$ %
var 
	exception 
= 
context 
.  
	Exception  )
;) *
switch 
( 
	exception 
) 
{ 	
case !
ArgumentNullException &
argNullException' 7
:7 8
response 
= 
new 
ObjectResult +
(+ ,
new, /
{ 

StatusCode 
=  
(! "
int" %
)% &
HttpStatusCode& 4
.4 5

BadRequest5 ?
,? @
Message 
= 
$str =
,= >
Detail 
= 
argNullException -
.- .
Message. 5
} 
) 
{ 

StatusCode 
=  
(! "
int" %
)% &
HttpStatusCode& 4
.4 5

BadRequest5 ?
}   
;   
break!! 
;!! 
case## 
ArgumentException## "
argException### /
:##/ 0
response$$ 
=$$ 
new$$ 
ObjectResult$$ +
($$+ ,
new$$, /
{%% 

StatusCode&& 
=&&  
(&&! "
int&&" %
)&&% &
HttpStatusCode&&& 4
.&&4 5

BadRequest&&5 ?
,&&? @
Message'' 
='' 
$str'' N
,''N O
Detail(( 
=(( 
argException(( )
.(() *
Message((* 1
})) 
))) 
{** 

StatusCode++ 
=++  
(++! "
int++" %
)++% &
HttpStatusCode++& 4
.++4 5

BadRequest++5 ?
},, 
;,, 
break-- 
;-- 
case// %
InvalidOperationException// *
invOpException//+ 9
://9 :
response00 
=00 
new00 
ObjectResult00 +
(00+ ,
new00, /
{11 

StatusCode22 
=22  
(22! "
int22" %
)22% &
HttpStatusCode22& 4
.224 5
Conflict225 =
,22= >
Message33 
=33 
$str33 9
,339 :
Detail44 
=44 
invOpException44 +
.44+ ,
Message44, 3
}55 
)55 
{66 

StatusCode77 
=77  
(77! "
int77" %
)77% &
HttpStatusCode77& 4
.774 5
Conflict775 =
}88 
;88 
break99 
;99 
case;; '
UnauthorizedAccessException;; ,
unAuthException;;- <
:;;< =
response<< 
=<< 
new<< 
ObjectResult<< +
(<<+ ,
new<<, /
{== 

StatusCode>> 
=>>  
(>>! "
int>>" %
)>>% &
HttpStatusCode>>& 4
.>>4 5
Unauthorized>>5 A
,>>A B
Message?? 
=?? 
$str?? 4
,??4 5
Detail@@ 
=@@ 
unAuthException@@ ,
.@@, -
Message@@- 4
}AA 
)AA 
{BB 

StatusCodeCC 
=CC  
(CC! "
intCC" %
)CC% &
HttpStatusCodeCC& 4
.CC4 5
UnauthorizedCC5 A
}DD 
;DD 
breakEE 
;EE 
caseGG !
FileNotFoundExceptionGG &!
fileNotFoundExceptionGG' <
:GG< =
responseHH 
=HH 
newHH 
ObjectResultHH +
(HH+ ,
newHH, /
{II 

StatusCodeJJ 
=JJ  
(JJ! "
intJJ" %
)JJ% &
HttpStatusCodeJJ& 4
.JJ4 5
NotFoundJJ5 =
,JJ= >
MessageKK 
=KK 
$strKK /
,KK/ 0
DetailLL 
=LL !
fileNotFoundExceptionLL 2
.LL2 3
MessageLL3 :
}MM 
)MM 
{NN 

StatusCodeOO 
=OO  
(OO! "
intOO" %
)OO% &
HttpStatusCodeOO& 4
.OO4 5
NotFoundOO5 =
}PP 
;PP 
breakQQ 
;QQ 
caseRR 
SqlExceptionRR 
sqlExceptionRR *
whenRR+ /
sqlExceptionRR0 <
.RR< =
NumberRR= C
==RRD F
$numRRG K
:RRK L
responseTT 
=TT 
newTT 
ObjectResultTT +
(TT+ ,
newTT, /
{UU 

StatusCodeVV 
=VV  
(VV! "
intVV" %
)VV% &
HttpStatusCodeVV& 4
.VV4 5
ConflictVV5 =
,VV= >
MessageWW 
=WW 
$strWW g
,WWg h
DetailXX 
=XX 
sqlExceptionXX )
.XX) *
MessageXX* 1
}YY 
)YY 
{ZZ 

StatusCode[[ 
=[[  
([[! "
int[[" %
)[[% &
HttpStatusCode[[& 4
.[[4 5
Conflict[[5 =
}\\ 
;\\ 
break]] 
;]] 
case__ 
SqlException__ 
sqlException__ *
:__* +
response`` 
=`` 
new`` 
ObjectResult`` +
(``+ ,
new``, /
{aa 

StatusCodebb 
=bb  
(bb! "
intbb" %
)bb% &
HttpStatusCodebb& 4
.bb4 5
InternalServerErrorbb5 H
,bbH I
Messagecc 
=cc 
$strcc :
,cc: ;
Detaildd 
=dd 
sqlExceptiondd )
.dd) *
Messagedd* 1
}ee 
)ee 
{ff 

StatusCodegg 
=gg  
(gg! "
intgg" %
)gg% &
HttpStatusCodegg& 4
.gg4 5
InternalServerErrorgg5 H
}hh 
;hh 
breakii 
;ii 
casemm  
HttpRequestExceptionmm % 
httpRequestExceptionmm& :
:mm: ;
responsenn 
=nn 
newnn 
ObjectResultnn +
(nn+ ,
newnn, /
{oo 

StatusCodepp 
=pp  
(pp! "
intpp" %
)pp% &
HttpStatusCodepp& 4
.pp4 5

BadGatewaypp5 ?
,pp? @
Messageqq 
=qq 
$strqq ?
,qq? @
Detailrr 
=rr  
httpRequestExceptionrr 1
.rr1 2
Messagerr2 9
}ss 
)ss 
{tt 

StatusCodeuu 
=uu  
(uu! "
intuu" %
)uu% &
HttpStatusCodeuu& 4
.uu4 5

BadGatewayuu5 ?
}vv 
;vv 
breakww 
;ww 
caseyy 
TimeoutExceptionyy !
timeoutExceptionyy" 2
:yy2 3
responsezz 
=zz 
newzz 
ObjectResultzz +
(zz+ ,
newzz, /
{{{ 

StatusCode|| 
=||  
(||! "
int||" %
)||% &
HttpStatusCode||& 4
.||4 5
RequestTimeout||5 C
,||C D
Message}} 
=}} 
$str}} 6
,}}6 7
Detail~~ 
=~~ 
timeoutException~~ -
.~~- .
Message~~. 5
} 
) 
{
ÄÄ 

StatusCode
ÅÅ 
=
ÅÅ  
(
ÅÅ! "
int
ÅÅ" %
)
ÅÅ% &
HttpStatusCode
ÅÅ& 4
.
ÅÅ4 5
RequestTimeout
ÅÅ5 C
}
ÇÇ 
;
ÇÇ 
break
ÉÉ 
;
ÉÉ 
case
ÖÖ 
FormatException
ÖÖ  
formatException
ÖÖ! 0
:
ÖÖ0 1
response
ÜÜ 
=
ÜÜ 
new
ÜÜ 
ObjectResult
ÜÜ +
(
ÜÜ+ ,
new
ÜÜ, /
{
áá 

StatusCode
àà 
=
àà  
(
àà! "
int
àà" %
)
àà% &
HttpStatusCode
àà& 4
.
àà4 5

BadRequest
àà5 ?
,
àà? @
Message
ââ 
=
ââ 
$str
ââ 9
,
ââ9 :
Detail
ää 
=
ää 
formatException
ää ,
.
ää, -
Message
ää- 4
}
ãã 
)
ãã 
{
åå 

StatusCode
çç 
=
çç  
(
çç! "
int
çç" %
)
çç% &
HttpStatusCode
çç& 4
.
çç4 5

BadRequest
çç5 ?
}
éé 
;
éé 
break
èè 
;
èè 
case
ëë 
JsonException
ëë 
jsonException
ëë ,
:
ëë, -
response
íí 
=
íí 
new
íí 
ObjectResult
íí +
(
íí+ ,
new
íí, /
{
ìì 

StatusCode
îî 
=
îî  
(
îî! "
int
îî" %
)
îî% &
HttpStatusCode
îî& 4
.
îî4 5

BadRequest
îî5 ?
,
îî? @
Message
ïï 
=
ïï 
$str
ïï B
,
ïïB C
Detail
ññ 
=
ññ 
jsonException
ññ *
.
ññ* +
Message
ññ+ 2
}
óó 
)
óó 
{
òò 

StatusCode
ôô 
=
ôô  
(
ôô! "
int
ôô" %
)
ôô% &
HttpStatusCode
ôô& 4
.
ôô4 5

BadRequest
ôô5 ?
}
öö 
;
öö 
break
õõ 
;
õõ 
case
ùù "
KeyNotFoundException
ùù %"
keyNotFoundException
ùù& :
:
ùù: ;
response
ûû 
=
ûû 
new
ûû 
ObjectResult
ûû +
(
ûû+ ,
new
ûû, /
{
üü 

StatusCode
†† 
=
††  
(
††! "
int
††" %
)
††% &
HttpStatusCode
††& 4
.
††4 5
NotFound
††5 =
,
††= >
Message
°° 
=
°° 
$str
°° .
,
°°. /
Detail
¢¢ 
=
¢¢ "
keyNotFoundException
¢¢ 1
.
¢¢1 2
Message
¢¢2 9
}
££ 
)
££ 
{
§§ 

StatusCode
•• 
=
••  
(
••! "
int
••" %
)
••% &
HttpStatusCode
••& 4
.
••4 5
NotFound
••5 =
}
¶¶ 
;
¶¶ 
break
ßß 
;
ßß 
case
©© "
InvalidDataException
©© %"
invalidDataException
©©& :
:
©©: ;
response
™™ 
=
™™ 
new
™™ 
ObjectResult
™™ +
(
™™+ ,
new
™™, /
{
´´ 

StatusCode
¨¨ 
=
¨¨  
(
¨¨! "
int
¨¨" %
)
¨¨% &
HttpStatusCode
¨¨& 4
.
¨¨4 5

BadRequest
¨¨5 ?
,
¨¨? @
Message
≠≠ 
=
≠≠ 
$str
≠≠ 3
,
≠≠3 4
Detail
ÆÆ 
=
ÆÆ "
invalidDataException
ÆÆ 1
.
ÆÆ1 2
Message
ÆÆ2 9
}
ØØ 
)
ØØ 
{
∞∞ 

StatusCode
±± 
=
±±  
(
±±! "
int
±±" %
)
±±% &
HttpStatusCode
±±& 4
.
±±4 5

BadRequest
±±5 ?
}
≤≤ 
;
≤≤ 
break
≥≥ 
;
≥≥ 
case
µµ %
NotImplementedException
µµ (%
notImplementedException
µµ) @
:
µµ@ A
response
∂∂ 
=
∂∂ 
new
∂∂ 
ObjectResult
∂∂ +
(
∂∂+ ,
new
∂∂, /
{
∑∑ 

StatusCode
∏∏ 
=
∏∏  
(
∏∏! "
int
∏∏" %
)
∏∏% &
HttpStatusCode
∏∏& 4
.
∏∏4 5
NotImplemented
∏∏5 C
,
∏∏C D
Message
ππ 
=
ππ 
$str
ππ 8
,
ππ8 9
Detail
∫∫ 
=
∫∫ %
notImplementedException
∫∫ 4
.
∫∫4 5
Message
∫∫5 <
}
ªª 
)
ªª 
{
ºº 

StatusCode
ΩΩ 
=
ΩΩ  
(
ΩΩ! "
int
ΩΩ" %
)
ΩΩ% &
HttpStatusCode
ΩΩ& 4
.
ΩΩ4 5
NotImplemented
ΩΩ5 C
}
ææ 
;
ææ 
break
øø 
;
øø 
case
¡¡ 
	Exception
¡¡ 
generalException
¡¡ +
:
¡¡+ ,
response
¬¬ 
=
¬¬ 
new
¬¬ 
ObjectResult
¬¬ +
(
¬¬+ ,
new
¬¬, /
{
√√ 

StatusCode
ƒƒ 
=
ƒƒ  
(
ƒƒ! "
int
ƒƒ" %
)
ƒƒ% &
HttpStatusCode
ƒƒ& 4
.
ƒƒ4 5!
InternalServerError
ƒƒ5 H
,
ƒƒH I
Message
≈≈ 
=
≈≈ 
$str
≈≈ U
,
≈≈U V
Detail
∆∆ 
=
∆∆ 
generalException
∆∆ -
.
∆∆- .
Message
∆∆. 5
}
«« 
)
«« 
{
»» 

StatusCode
…… 
=
……  
(
……! "
int
……" %
)
……% &
HttpStatusCode
……& 4
.
……4 5!
InternalServerError
……5 H
}
   
;
   
break
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
if
œœ 

(
œœ 
response
œœ 
!=
œœ 
null
œœ 
)
œœ 
{
–– 	
context
—— 
.
—— 
Result
—— 
=
—— 
response
—— %
;
——% &
}
““ 	
_logger
‘‘ 
.
‘‘ 
Error
‘‘ 
(
‘‘ 
$str
‘‘ )
,
‘‘) *
	exception
‘‘+ 4
)
‘‘4 5
;
‘‘5 6
}
’’ 
}÷÷ Ä:
ED:\Hotpot\WebApplication1\Controllers\UserServiceReportsController.cs
	namespace		 	
WebApplication1		
 
.		 
Controllers		 %
{

 
[ 

ApiVersion 
( 
$str 
) 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[ 
	Authorize 
( 
Roles 
= 
$str 
) 
] 
public 

class (
UserServiceReportsController -
:. /
ControllerBase0 >
{ 
private 
readonly (
IUserServiceReportsInterface 5
_userService6 B
;B C
public (
UserServiceReportsController +
(+ ,(
IUserServiceReportsInterface, H
userServiceI T
)T U
{ 	
_userService 
= 
userService &
;& '
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
IActionResult 
Register %
(% &
[& '
FromBody' /
]/ 0
UserDTO1 8
userDto9 @
)@ A
{ 	
_userService 
. 
RegisterUser %
(% &
userDto& -
)- .
;. /
return 
Ok 
( 
) 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public   
IActionResult   
Login   "
(  " #
[  # $
FromBody  $ ,
]  , -
LoginDTO  . 6
loginDto  7 ?
)  ? @
{!! 	
var"" 
user"" 
="" 
_userService"" #
.""# $
Login""$ )
("") *
loginDto""* 2
.""2 3
UsernameOrEmail""3 B
,""B C
loginDto""D L
.""L M
Password""M U
)""U V
;""V W
if## 
(## 
user## 
==## 
null## 
)## 
return## $
Unauthorized##% 1
(##1 2
)##2 3
;##3 4
return$$ 
Ok$$ 
($$ 
user$$ 
)$$ 
;$$ 
}%% 	
['' 	
HttpPost''	 
('' 
$str'' 
)'' 
]'' 
public(( 
IActionResult(( 
Logout(( #
(((# $
)(($ %
{)) 	
_userService** 
.** 
Logout** 
(**  
)**  !
;**! "
return++ 
Ok++ 
(++ 
)++ 
;++ 
},, 	
[.. 	
HttpGet..	 
(.. 
$str.. 
)..  
]..  !
public// 
IActionResult// 
GetUserByEmail// +
(//+ ,
string//, 2
email//3 8
)//8 9
{00 	
var11 
user11 
=11 
_userService11 #
.11# $
GetUserByEmail11$ 2
(112 3
email113 8
)118 9
;119 :
if22 
(22 
user22 
==22 
null22 
)22 
return22 $
NotFound22% -
(22- .
)22. /
;22/ 0
return33 
Ok33 
(33 
user33 
)33 
;33 
}44 	
[66 	
HttpGet66	 
(66 
$str66 
)66 
]66 
public77 
IActionResult77 
GetAllMenus77 (
(77( )
)77) *
{88 	
var99 
menus99 
=99 
_userService99 $
.99$ %
GetAllMenus99% 0
(990 1
)991 2
;992 3
return:: 
Ok:: 
(:: 
menus:: 
):: 
;:: 
};; 	
[== 	
HttpGet==	 
(== 
$str== 
)== 
]== 
public>> 
IActionResult>> 
SearchMenuItems>> ,
(>>, -
[>>- .
	FromQuery>>. 7
]>>7 8
string>>9 ?
query>>@ E
)>>E F
{?? 	
var@@ 
items@@ 
=@@ 
_userService@@ $
.@@$ %
SearchMenuItems@@% 4
(@@4 5
query@@5 :
)@@: ;
;@@; <
returnAA 
OkAA 
(AA 
itemsAA 
)AA 
;AA 
}BB 	
[DD 	
HttpGetDD	 
(DD 
$strDD 
)DD 
]DD 
publicEE 
IActionResultEE 
GetMenuItemByIdEE ,
(EE, -
intEE- 0
idEE1 3
)EE3 4
{FF 	
varGG 
itemGG 
=GG 
_userServiceGG #
.GG# $
GetMenuItemByIdGG$ 3
(GG3 4
idGG4 6
)GG6 7
;GG7 8
ifHH 
(HH 
itemHH 
==HH 
nullHH 
)HH 
returnHH $
NotFoundHH% -
(HH- .
)HH. /
;HH/ 0
returnII 
OkII 
(II 
itemII 
)II 
;II 
}JJ 	
[NN 	
HttpGetNN	 
(NN 
$strNN  
)NN  !
]NN! "
publicOO 
IActionResultOO 
GetCartContentsOO ,
(OO, -
intOO- 0
userIdOO1 7
)OO7 8
{PP 	
varQQ 
cartQQ 
=QQ 
_userServiceQQ #
.QQ# $
GetCartContentsQQ$ 3
(QQ3 4
userIdQQ4 :
)QQ: ;
;QQ; <
returnRR 
OkRR 
(RR 
cartRR 
)RR 
;RR 
}SS 	
[UU 	
HttpGetUU	 
(UU 
$strUU "
)UU" #
]UU# $
publicVV 
IActionResultVV 
GetOrderDetailsVV ,
(VV, -
intVV- 0
orderIdVV1 8
)VV8 9
{WW 	
varXX 
orderXX 
=XX 
_userServiceXX $
.XX$ %
GetOrderDetailsXX% 4
(XX4 5
orderIdXX5 <
)XX< =
;XX= >
ifYY 
(YY 
orderYY 
==YY 
nullYY 
)YY 
returnYY %
NotFoundYY& .
(YY. /
)YY/ 0
;YY0 1
returnZZ 
OkZZ 
(ZZ 
orderZZ 
)ZZ 
;ZZ 
}[[ 	
[]] 	
HttpGet]]	 
(]] 
$str]] )
)]]) *
]]]* +
public^^ 
IActionResult^^ 
GetOrderHistory^^ ,
(^^, -
int^^- 0
userId^^1 7
)^^7 8
{__ 	
var`` 
orders`` 
=`` 
_userService`` %
.``% &
GetOrderHistory``& 5
(``5 6
userId``6 <
)``< =
;``= >
returnaa 
Okaa 
(aa 
ordersaa 
)aa 
;aa 
}bb 	
}cc 
}dd ÄL
7D:\Hotpot\WebApplication1\Controllers\UserController.cs
[ 
ApiController 
] 
[		 
Route		 
(		 
$str		 
)		 
]		 
[

 
ServiceFilter

 
(

 
typeof

 
(

 
ActionFilter

 "
)

" #
)

# $
]

$ %
public 
class 
UserController 
: 
ControllerBase ,
{ 
private 
readonly 
UserService  
_userService! -
;- .
private 
readonly 
ILogger 
< 
UserController +
>+ ,
_logger- 4
;4 5
public 

UserController 
( 
UserService %
userService& 1
,1 2
ILogger3 :
<: ;
UserController; I
>I J
loggerK Q
)Q R
{ 
_userService 
= 
userService "
;" #
_logger 
= 
logger 
; 
} 
[ 
HttpGet 
] 
public 

ActionResult 
< 
IEnumerable #
<# $
UserDTO$ +
>+ ,
>, -
GetAllUsers. 9
(9 :
): ;
{ 
_logger 
. 
LogInformation 
( 
$str @
)@ A
;A B
var 
users 
= 
_userService  
.  !
GetAllUsers! ,
(, -
)- .
;. /
return 
Ok 
( 
users 
) 
; 
} 
[ 
HttpGet 
( 
$str 
) 
] 
public 

ActionResult 
< 
UserDTO 
>  
GetUserById! ,
(, -
int- 0
id1 3
)3 4
{   
_logger!! 
.!! 
LogInformation!! 
(!! 
$"!! !
$str!!! C
{!!C D
id!!D F
}!!F G
$str!!G H
"!!H I
)!!I J
;!!J K
var"" 
user"" 
="" 
_userService"" 
.""  
GetUserById""  +
(""+ ,
id"", .
)"". /
;""/ 0
if## 

(## 
user## 
==## 
null## 
)## 
{$$ 	
return%% 
NotFound%% 
(%% 
)%% 
;%% 
}&& 	
return'' 
Ok'' 
('' 
user'' 
)'' 
;'' 
}(( 
[** 
HttpPost** 
]** 
public++ 

IActionResult++ 

CreateUser++ #
(++# $
UserDTO++$ +
userDto++, 3
)++3 4
{,, 
_logger-- 
.-- 
LogInformation-- 
(-- 
$"-- !
$str--! I
{--I J
userDto--J Q
.--Q R
Username--R Z
}--Z [
$str--[ \
"--\ ]
)--] ^
;--^ _
_userService.. 
... 

CreateUser.. 
(..  
userDto..  '
)..' (
;..( )
return// 
CreatedAtAction// 
(// 
nameof// %
(//% &
GetUserById//& 1
)//1 2
,//2 3
new//4 7
{//8 9
id//: <
=//= >
userDto//? F
.//F G
UserID//G M
}//N O
,//O P
userDto//Q X
)//X Y
;//Y Z
}00 
[22 
HttpPut22 
(22 
$str22 
)22 
]22 
public33 

IActionResult33 

UpdateUser33 #
(33# $
int33$ '
id33( *
,33* +
UserDTO33, 3
userDto334 ;
)33; <
{44 
if55 

(55 
id55 
!=55 
userDto55 
.55 
UserID55  
)55  !
{66 	
return77 

BadRequest77 
(77 
)77 
;77  
}88 	
_logger:: 
.:: 
LogInformation:: 
(:: 
$":: !
$str::! C
{::C D
id::D F
}::F G
$str::G H
"::H I
)::I J
;::J K
_userService;; 
.;; 

UpdateUser;; 
(;;  
id;;  "
,;;" #
userDto;;# *
);;* +
;;;+ ,
return<< 
	NoContent<< 
(<< 
)<< 
;<< 
}== 
[?? 

HttpDelete?? 
(?? 
$str?? 
)?? 
]?? 
public@@ 

IActionResult@@ 

DeleteUser@@ #
(@@# $
int@@$ '
id@@( *
)@@* +
{AA 
_loggerBB 
.BB 
LogInformationBB 
(BB 
$"BB !
$strBB! C
{BBC D
idBBD F
}BBF G
$strBBG H
"BBH I
)BBI J
;BBJ K
_userServiceCC 
.CC 

DeleteUserCC 
(CC  
idCC  "
)CC" #
;CC# $
returnDD 
	NoContentDD 
(DD 
)DD 
;DD 
}EE 
[FF 
HttpGetFF 
(FF 
$strFF "
)FF" #
]FF# $
publicGG 

ActionResultGG 
<GG 
UserDTOGG 
>GG  
GetUserByUsernameGG! 2
(GG2 3
stringGG3 9
usernameGG: B
)GGB C
{HH 
varII 
userII 
=II 
_userServiceII 
.II  
GetUserByUsernameII  1
(II1 2
usernameII2 :
)II: ;
;II; <
ifJJ 

(JJ 
userJJ 
==JJ 
nullJJ 
)JJ 
{KK 	
returnLL 
NotFoundLL 
(LL 
$"LL 
$strLL 1
{LL1 2
usernameLL2 :
}LL: ;
$strLL; F
"LLF G
)LLG H
;LLH I
}MM 	
returnNN 
OkNN 
(NN 
userNN 
)NN 
;NN 
}OO 
[RR 
HttpGetRR 
(RR 
$strRR 
)RR 
]RR 
publicSS 

ActionResultSS 
<SS 
UserDTOSS 
>SS  
GetUserByEmailSS! /
(SS/ 0
stringSS0 6
emailSS7 <
)SS< =
{TT 
varUU 
userUU 
=UU 
_userServiceUU 
.UU  
GetUserByEmailUU  .
(UU. /
emailUU/ 4
)UU4 5
;UU5 6
ifVV 

(VV 
userVV 
==VV 
nullVV 
)VV 
{WW 	
returnXX 
NotFoundXX 
(XX 
$"XX 
$strXX .
{XX. /
emailXX/ 4
}XX4 5
$strXX5 @
"XX@ A
)XXA B
;XXB C
}YY 	
returnZZ 
OkZZ 
(ZZ 
userZZ 
)ZZ 
;ZZ 
}[[ 
[^^ 
HttpGet^^ 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 

ActionResult__ 
<__ 
IEnumerable__ #
<__# $
FeedbackRatingDTO__$ 5
>__5 6
>__6 7
GetUserReviews__8 F
(__F G
int__G J
id__K M
)__M N
{`` 
varaa 
reviewsaa 
=aa 
_userServiceaa "
.aa" #
GetUserReviewsaa# 1
(aa1 2
idaa2 4
)aa4 5
;aa5 6
ifbb 

(bb 
reviewsbb 
==bb 
nullbb 
||bb 
!bb  
reviewsbb  '
.bb' (
Anybb( +
(bb+ ,
)bb, -
)bb- .
{cc 	
returndd 
NotFounddd 
(dd 
$"dd 
$strdd @
{dd@ A
idddA C
}ddC D
$strddD E
"ddE F
)ddF G
;ddG H
}ee 	
returnff 
Okff 
(ff 
reviewsff 
)ff 
;ff 
}gg 
[jj 
HttpGetjj 
(jj 
$strjj 
)jj 
]jj 
publickk 

ActionResultkk 
<kk 
IEnumerablekk #
<kk# $
OrderDTOkk$ ,
>kk, -
>kk- . 
GetAllOrdersByUserIdkk/ C
(kkC D
intkkD G
idkkH J
)kkJ K
{ll 
varmm 
ordersmm 
=mm 
_userServicemm !
.mm! " 
GetAllOrdersByUserIdmm" 6
(mm6 7
idmm7 9
)mm9 :
;mm: ;
ifnn 

(nn 
ordersnn 
==nn 
nullnn 
||nn 
!nn 
ordersnn %
.nn% &
Anynn& )
(nn) *
)nn* +
)nn+ ,
{oo 	
returnpp 
NotFoundpp 
(pp 
$"pp 
$strpp ?
{pp? @
idpp@ B
}ppB C
$strppC D
"ppD E
)ppE F
;ppF G
}qq 	
returnrr 
Okrr 
(rr 
ordersrr 
)rr 
;rr 
}ss 
}uu Áo
KD:\Hotpot\WebApplication1\Controllers\RestaurantServiceReportsController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 

ApiVersion		 
(		 
$str		 
)		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
[ 
	Authorize 
( 
Roles 
= 
$str #
)# $
]$ %
public 

class .
"RestaurantServiceReportsController 3
:4 5
ControllerBase6 D
{ 
private 
readonly .
"IRestaurantServiceReportsInterface ;
_restaurantService< N
;N O
private 
readonly 
ILogger  
<  !.
"RestaurantServiceReportsController! C
>C D
_logE I
;I J
public .
"RestaurantServiceReportsController 1
(1 2.
"IRestaurantServiceReportsInterface2 T
restaurantServiceU f
,f g
ILoggerh o
<o p/
"RestaurantServiceReportsController	p í
>
í ì
log
î ó
)
ó ò
{ 	
_restaurantService 
=  
restaurantService! 2
;2 3
_log 
= 
log 
?? 
throw 
new  #!
ArgumentNullException$ 9
(9 :
nameof: @
(@ A
logA D
)D E
)E F
;F G
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
IActionResult 
Login "
(" #
[# $
FromBody$ ,
], -
LoginDTO. 6
loginDto7 ?
)? @
{ 	
try 
{ 
_restaurantService "
." #
Login# (
(( )
loginDto) 1
.1 2
UsernameOrEmail2 A
,A B
loginDtoC K
.K L
PasswordL T
)T U
;U V
return 
Ok 
( 
$str 3
)3 4
;4 5
} 
catch   
(   
	Exception   
ex   
)    
{!! 
_log"" 
."" 
LogError"" 
("" 
$"""  
$str""  2
{""2 3
ex""3 5
.""5 6
Message""6 =
}""= >
"""> ?
)""? @
;""@ A
return## 

BadRequest## !
(##! "
$str##" 5
)##5 6
;##6 7
}$$ 
}%% 	
['' 	
HttpPost''	 
('' 
$str'' 
)'' 
]'' 
public(( 
IActionResult(( 
Logout(( #
(((# $
)(($ %
{)) 	
try** 
{++ 
_restaurantService,, "
.,," #
Logout,,# )
(,,) *
),,* +
;,,+ ,
return-- 
Ok-- 
(-- 
$str-- 4
)--4 5
;--5 6
}.. 
catch// 
(// 
	Exception// 
ex// 
)//  
{00 
_log11 
.11 
LogError11 
(11 
$"11  
$str11  3
{113 4
ex114 6
.116 7
Message117 >
}11> ?
"11? @
)11@ A
;11A B
return22 

BadRequest22 !
(22! "
$str22" 6
)226 7
;227 8
}33 
}44 	
[66 	
HttpPost66	 
(66 
$str66 
)66 
]66 
public77 
IActionResult77 
CreateMenuItem77 +
(77+ ,
[77, -
FromBody77- 5
]775 6
MenuItemDTO777 B
menuItemDto77C N
)77N O
{88 	
try99 
{:: 
_restaurantService;; "
.;;" #
CreateMenuItem;;# 1
(;;1 2
menuItemDto;;2 =
);;= >
;;;> ?
return<< 
Ok<< 
(<< 
$str<< ;
)<<; <
;<<< =
}== 
catch>> 
(>> 
	Exception>> 
ex>> 
)>>  
{?? 
_log@@ 
.@@ 
LogError@@ 
(@@ 
$"@@  
$str@@  :
{@@: ;
ex@@; =
.@@= >
Message@@> E
}@@E F
"@@F G
)@@G H
;@@H I
returnAA 

BadRequestAA !
(AA! "
$strAA" =
)AA= >
;AA> ?
}BB 
}CC 	
[EE 	
HttpPutEE	 
(EE 
$strEE 
)EE 
]EE 
publicFF 
IActionResultFF 
UpdateMenuItemFF +
(FF+ ,
[FF, -
FromBodyFF- 5
]FF5 6
MenuItemDTOFF7 B
menuItemDtoFFC N
)FFN O
{GG 	
tryHH 
{II 
_restaurantServiceJJ "
.JJ" #
UpdateMenuItemJJ# 1
(JJ1 2
menuItemDtoJJ2 =
)JJ= >
;JJ> ?
returnKK 
OkKK 
(KK 
$strKK ;
)KK; <
;KK< =
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
_logOO 
.OO 
LogErrorOO 
(OO 
$"OO  
$strOO  :
{OO: ;
exOO; =
.OO= >
MessageOO> E
}OOE F
"OOF G
)OOG H
;OOH I
returnPP 

BadRequestPP !
(PP! "
$strPP" =
)PP= >
;PP> ?
}QQ 
}RR 	
[TT 	

HttpDeleteTT	 
(TT 
$strTT ,
)TT, -
]TT- .
publicUU 
IActionResultUU 
DeleteMenuItemUU +
(UU+ ,
intUU, /

menuItemIdUU0 :
)UU: ;
{VV 	
tryWW 
{XX 
_restaurantServiceYY "
.YY" #
DeleteMenuItemYY# 1
(YY1 2

menuItemIdYY2 <
)YY< =
;YY= >
returnZZ 
OkZZ 
(ZZ 
$strZZ ;
)ZZ; <
;ZZ< =
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
_log^^ 
.^^ 
LogError^^ 
(^^ 
$"^^  
$str^^  :
{^^: ;
ex^^; =
.^^= >
Message^^> E
}^^E F
"^^F G
)^^G H
;^^H I
return__ 

BadRequest__ !
(__! "
$str__" =
)__= >
;__> ?
}`` 
}aa 	
[cc 	
	HttpPatchcc	 
(cc 
$strcc 6
)cc6 7
]cc7 8
publicdd 
IActionResultdd "
MarkMenuItemOutOfStockdd 3
(dd3 4
intdd4 7

menuItemIddd8 B
)ddB C
{ee 	
tryff 
{gg 
_restaurantServicehh "
.hh" #"
MarkMenuItemOutOfStockhh# 9
(hh9 :

menuItemIdhh: D
)hhD E
;hhE F
returnii 
Okii 
(ii 
$strii =
)ii= >
;ii> ?
}jj 
catchkk 
(kk 
	Exceptionkk 
exkk 
)kk  
{ll 
_logmm 
.mm 
LogErrormm 
(mm 
$"mm  
$strmm  I
{mmI J
exmmJ L
.mmL M
MessagemmM T
}mmT U
"mmU V
)mmV W
;mmW X
returnnn 

BadRequestnn !
(nn! "
$strnn" L
)nnL M
;nnM N
}oo 
}pp 	
[rr 	
HttpGetrr	 
(rr 
$strrr 0
)rr0 1
]rr1 2
publicss 
IActionResultss 
GetOngoingOrdersss -
(ss- .
intss. 1
restaurantIdss2 >
)ss> ?
{tt 	
tryuu 
{vv 
varww 
ordersww 
=ww 
_restaurantServiceww /
.ww/ 0
GetOngoingOrdersww0 @
(ww@ A
restaurantIdwwA M
)wwM N
;wwN O
returnxx 
Okxx 
(xx 
ordersxx  
)xx  !
;xx! "
}yy 
catchzz 
(zz 
	Exceptionzz 
exzz 
)zz  
{{{ 
_log|| 
.|| 
LogError|| 
(|| 
$"||  
$str||  A
{||A B
ex||B D
.||D E
Message||E L
}||L M
"||M N
)||N O
;||O P
return}} 

BadRequest}} !
(}}! "
$str}}" D
)}}D E
;}}E F
}~~ 
} 	
[
ÅÅ 	
HttpPut
ÅÅ	 
(
ÅÅ 
$str
ÅÅ *
)
ÅÅ* +
]
ÅÅ+ ,
public
ÇÇ 
IActionResult
ÇÇ 
UpdateOrderStatus
ÇÇ .
(
ÇÇ. /
int
ÇÇ/ 2
orderId
ÇÇ3 :
,
ÇÇ: ;
[
ÇÇ< =
FromBody
ÇÇ= E
]
ÇÇE F
string
ÇÇG M
orderStatus
ÇÇN Y
)
ÇÇY Z
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ  
_restaurantService
ÜÜ "
.
ÜÜ" #
UpdateOrderStatus
ÜÜ# 4
(
ÜÜ4 5
orderId
ÜÜ5 <
,
ÜÜ< =
orderStatus
ÜÜ> I
)
ÜÜI J
;
ÜÜJ K
return
áá 
Ok
áá 
(
áá 
$str
áá >
)
áá> ?
;
áá? @
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 
_log
ãã 
.
ãã 
LogError
ãã 
(
ãã 
$"
ãã  
$str
ãã  =
{
ãã= >
ex
ãã> @
.
ãã@ A
Message
ããA H
}
ããH I
"
ããI J
)
ããJ K
;
ããK L
return
åå 

BadRequest
åå !
(
åå! "
$str
åå" @
)
åå@ A
;
ååA B
}
çç 
}
éé 	
[
êê 	
HttpGet
êê	 
(
êê 
$str
êê 0
)
êê0 1
]
êê1 2
public
ëë 
IActionResult
ëë 
GetOrderHistory
ëë ,
(
ëë, -
int
ëë- 0
restaurantId
ëë1 =
)
ëë= >
{
íí 	
try
ìì 
{
îî 
var
ïï 
orders
ïï 
=
ïï  
_restaurantService
ïï /
.
ïï/ 0
GetOrderHistory
ïï0 ?
(
ïï? @
restaurantId
ïï@ L
)
ïïL M
;
ïïM N
return
ññ 
Ok
ññ 
(
ññ 
orders
ññ  
)
ññ  !
;
ññ! "
}
óó 
catch
òò 
(
òò 
	Exception
òò 
ex
òò 
)
òò  
{
ôô 
_log
öö 
.
öö 
LogError
öö 
(
öö 
$"
öö  
$str
öö  @
{
öö@ A
ex
ööA C
.
ööC D
Message
ööD K
}
ööK L
"
ööL M
)
ööM N
;
ööN O
return
õõ 

BadRequest
õõ !
(
õõ! "
$str
õõ" C
)
õõC D
;
õõD E
}
úú 
}
ùù 	
[
üü 	
HttpGet
üü	 
(
üü 
$str
üü '
)
üü' (
]
üü( )
public
†† 
ActionResult
†† 
<
†† 
List
††  
<
††  !
MenuItemDTO
††! ,
>
††, -
>
††- .
GetMenuItems
††/ ;
(
††; <
int
††< ?
restaurantId
††@ L
)
††L M
{
°° 	
try
¢¢ 
{
££ 
_log
§§ 
.
§§ 
LogInformation
§§ #
(
§§# $
$"
§§$ &
$str
§§& \
{
§§\ ]
restaurantId
§§] i
}
§§i j
"
§§j k
)
§§k l
;
§§l m
var
¶¶ 
	menuItems
¶¶ 
=
¶¶  
_restaurantService
¶¶  2
.
¶¶2 3
GetMenuItems
¶¶3 ?
(
¶¶? @
restaurantId
¶¶@ L
)
¶¶L M
;
¶¶M N
if
®® 
(
®® 
	menuItems
®® 
==
®®  
null
®®! %
||
®®& (
!
®®) *
	menuItems
®®* 3
.
®®3 4
Any
®®4 7
(
®®7 8
)
®®8 9
)
®®9 :
{
©© 
_log
™™ 
.
™™ 
LogInformation
™™ '
(
™™' (
$"
™™( *
$str
™™* Q
{
™™Q R
restaurantId
™™R ^
}
™™^ _
"
™™_ `
)
™™` a
;
™™a b
return
´´ 
NotFound
´´ #
(
´´# $
new
´´$ '
{
´´( )
Message
´´* 1
=
´´2 3
$str
´´4 g
}
´´h i
)
´´i j
;
´´j k
}
¨¨ 
_log
ÆÆ 
.
ÆÆ 
LogInformation
ÆÆ #
(
ÆÆ# $
$str
ÆÆ$ H
)
ÆÆH I
;
ÆÆI J
return
ØØ 
Ok
ØØ 
(
ØØ 
	menuItems
ØØ #
)
ØØ# $
;
ØØ$ %
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
ex
±± 
)
±±  
{
≤≤ 
_log
≥≥ 
.
≥≥ 
LogError
≥≥ 
(
≥≥ 
$"
≥≥  
$str
≥≥  O
{
≥≥O P
restaurantId
≥≥P \
}
≥≥\ ]
$str
≥≥] j
{
≥≥j k
ex
≥≥k m
.
≥≥m n
Message
≥≥n u
}
≥≥u v
"
≥≥v w
)
≥≥w x
;
≥≥x y
return
¥¥ 

StatusCode
¥¥ !
(
¥¥! "
$num
¥¥" %
,
¥¥% &
new
¥¥' *
{
¥¥+ ,
Message
¥¥- 4
=
¥¥5 6
$str
¥¥7 g
}
¥¥h i
)
¥¥i j
;
¥¥j k
}
µµ 
}
∂∂ 	
}
∑∑ 
}∏∏ ±
ED:\Hotpot\WebApplication1\Controllers\RestaurantMenuItemController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class (
RestaurantMenuItemController -
:. /
ControllerBase0 >
{ 
private 
readonly %
RestaurantMenuItemService 2&
_restaurantMenuItemService3 M
;M N
private 
readonly 
ILogger  
<  !(
RestaurantMenuItemController! =
>= >
_logger? F
;F G
public (
RestaurantMenuItemController +
(+ ,%
RestaurantMenuItemService, E%
restaurantMenuItemServiceF _
,_ `
ILoggera h
<h i)
RestaurantMenuItemController	i Ö
>
Ö Ü
logger
á ç
)
ç é
{ 	&
_restaurantMenuItemService &
=' (%
restaurantMenuItemService) B
;B C
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
$str !
)! "
]" #
public 
ActionResult 
< 
IEnumerable '
<' (
RestaurantMenuItem( :
>: ;
>; <&
GetRestaurantsWithMenuItem= W
(W X
stringX ^
menuItemName_ k
)k l
{ 	
_logger 
. 
LogInformation "
(" #
$"# %
$str% P
{P Q
menuItemNameQ ]
}] ^
"^ _
)_ `
;` a
var 
restaurants 
= &
_restaurantMenuItemService 8
.8 9&
GetRestaurantsWithMenuItem9 S
(S T
menuItemNameT `
)` a
;a b
if 
( 
restaurants 
== 
null #
||$ &
!' (
restaurants( 3
.3 4
Any4 7
(7 8
)8 9
)9 :
{   
_logger!! 
.!! 
LogInformation!! &
(!!& '
$str!!' Z
)!!Z [
;!![ \
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
return%% 
Ok%% 
(%% 
restaurants%% !
)%%! "
;%%" #
}&& 	
}'' 
}(( ‚R
=D:\Hotpot\WebApplication1\Controllers\RestaurantController.cs
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		  
RestaurantController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
RestaurantService &
_restaurantService' 9
;9 :
private 
readonly 
ILogger 
<  
RestaurantController 1
>1 2
_logger3 :
;: ;
public 
 
RestaurantController 
(  
RestaurantService  1
restaurantService2 C
,C D
ILoggerE L
<L M 
RestaurantControllerM a
>a b
loggerc i
)i j
{ 
_restaurantService 
= 
restaurantService .
;. /
_logger 
= 
logger 
; 
} 
[ 
HttpGet 
( 
$str 5
)5 6
]6 7
public 

IActionResult !
GetRestaurantIdByName .
(. /
string/ 5
restaurantName6 D
)D E
{ 
_logger 
. 
LogInformation 
( 
$" !
$str! M
{M N
restaurantNameN \
}\ ]
$str] ^
"^ _
)_ `
;` a
var 
restaurantId 
= 
_restaurantService -
.- .!
GetRestaurantIdByName. C
(C D
restaurantNameD R
)R S
;S T
if 

( 
restaurantId 
== 
null  
)  !
{ 	
_logger 
. 
LogInformation "
(" #
$"# %
$str% F
{F G
restaurantNameG U
}U V
$strV a
"a b
)b c
;c d
return 
NotFound 
( 
$" 
$str 3
{3 4
restaurantName4 B
}B C
$strC N
"N O
)O P
;P Q
} 	
return!! 
Ok!! 
(!! 
restaurantId!! 
)!! 
;!!  
}"" 
[%% 
HttpGet%% 
]%% 
public&& 

ActionResult&& 
<&& 
IEnumerable&& #
<&&# $
RestaurantDTO&&$ 1
>&&1 2
>&&2 3
GetAllRestaurants&&4 E
(&&E F
)&&F G
{'' 
_logger(( 
.(( 
LogInformation(( 
((( 
$str(( F
)((F G
;((G H
var)) 
restaurants)) 
=)) 
_restaurantService)) ,
.)), -
GetAllRestaurants))- >
())> ?
)))? @
;))@ A
return** 
Ok** 
(** 
restaurants** 
)** 
;** 
}++ 
[-- 
HttpGet-- 
(-- 
$str-- 
)-- 
]-- 
public.. 

ActionResult.. 
<.. 
RestaurantDTO.. %
>..% &
GetRestaurantById..' 8
(..8 9
int..9 <
id..= ?
)..? @
{// 
_logger00 
.00 
LogInformation00 
(00 
$"00 !
$str00! I
{00I J
id00J L
}00L M
$str00M N
"00N O
)00O P
;00P Q
var11 

restaurant11 
=11 
_restaurantService11 +
.11+ ,
GetRestaurantById11, =
(11= >
id11> @
)11@ A
;11A B
if22 

(22 

restaurant22 
==22 
null22 
)22 
{33 	
return44 
NotFound44 
(44 
)44 
;44 
}55 	
return66 
Ok66 
(66 

restaurant66 
)66 
;66 
}77 
[99 
HttpPost99 
]99 
public:: 

IActionResult:: 
CreateRestaurant:: )
(::) *
RestaurantDTO::* 7
restaurantDto::8 E
)::E F
{;; 
_logger<< 
.<< 
LogInformation<< 
(<< 
$"<< !
$str<<! K
{<<K L
restaurantDto<<L Y
.<<Y Z
Name<<Z ^
}<<^ _
$str<<_ `
"<<` a
)<<a b
;<<b c
_restaurantService== 
.== 
CreateRestaurant== +
(==+ ,
restaurantDto==, 9
)==9 :
;==: ;
return>> 
CreatedAtAction>> 
(>> 
nameof>> %
(>>% &
GetRestaurantById>>& 7
)>>7 8
,>>8 9
new>>: =
{>>> ?
id>>@ B
=>>C D
restaurantDto>>E R
.>>R S
RestaurantID>>S _
}>>` a
,>>a b
restaurantDto>>c p
)>>p q
;>>q r
}?? 
[AA 
HttpPutAA 
(AA 
$strAA 
)AA 
]AA 
publicBB 

IActionResultBB 
UpdateRestaurantBB )
(BB) *
intBB* -
idBB. 0
,BB0 1
RestaurantDTOBB2 ?
restaurantDtoBB@ M
)BBM N
{CC 
ifDD 

(DD 
idDD 
!=DD 
restaurantDtoDD 
.DD  
RestaurantIDDD  ,
)DD, -
{EE 	
returnFF 

BadRequestFF 
(FF 
)FF 
;FF  
}GG 	
_loggerII 
.II 
LogInformationII 
(II 
$"II !
$strII! I
{III J
idIIJ L
}IIL M
$strIIM N
"IIN O
)IIO P
;IIP Q
_restaurantServiceJJ 
.JJ 
UpdateRestaurantJJ +
(JJ+ ,
idJJ, .
,JJ. /
restaurantDtoJJ/ <
)JJ< =
;JJ= >
returnKK 
	NoContentKK 
(KK 
)KK 
;KK 
}LL 
[NN 

HttpDeleteNN 
(NN 
$strNN 
)NN 
]NN 
publicOO 

IActionResultOO 
DeleteRestaurantOO )
(OO) *
intOO* -
idOO. 0
)OO0 1
{PP 
_loggerQQ 
.QQ 
LogInformationQQ 
(QQ 
$"QQ !
$strQQ! I
{QQI J
idQQJ L
}QQL M
$strQQM N
"QQN O
)QQO P
;QQP Q
_restaurantServiceRR 
.RR 
DeleteRestaurantRR +
(RR+ ,
idRR, .
)RR. /
;RR/ 0
returnSS 
	NoContentSS 
(SS 
)SS 
;SS 
}TT 
[UU 
HttpGetUU 
(UU 
$strUU 
)UU 
]UU 
publicVV 

ActionResultVV 
<VV 
RestaurantDTOVV %
>VV% &*
GetRestaurantByNameAndLocationVV' E
(VVE F
[VVF G
	FromQueryVVG P
]VVP Q
stringVVR X
nameVVY ]
,VV] ^
[VV_ `
	FromQueryVV` i
]VVi j
stringVVk q
locationVVr z
)VVz {
{WW 
_loggerXX 
.XX 
LogInformationXX 
(XX 
$"XX !
$strXX! K
{XXK L
nameXXL P
}XXP Q
$strXXQ _
{XX_ `
locationXX` h
}XXh i
$strXXi j
"XXj k
)XXk l
;XXl m
varYY 

restaurantYY 
=YY 
_restaurantServiceYY +
.YY+ ,*
GetRestaurantByNameAndLocationYY, J
(YYJ K
nameYYK O
,YYO P
locationYYQ Y
)YYY Z
;YYZ [
ifZZ 

(ZZ 

restaurantZZ 
==ZZ 
nullZZ 
)ZZ 
{[[ 	
return\\ 
NotFound\\ 
(\\ 
)\\ 
;\\ 
}]] 	
return^^ 
Ok^^ 
(^^ 

restaurant^^ 
)^^ 
;^^ 
}__ 
[bb 
HttpGetbb 
(bb 
$strbb 
)bb 
]bb 
publiccc 

ActionResultcc 
<cc 
RestaurantDTOcc %
>cc% & 
GetRestaurantByEmailcc' ;
(cc; <
[cc< =
	FromQuerycc= F
]ccF G
stringccH N
emailccO T
)ccT U
{dd 
_loggeree 
.ee 
LogInformationee 
(ee 
$"ee !
$stree! L
{eeL M
emaileeM R
}eeR S
$streeS T
"eeT U
)eeU V
;eeV W
varff 

restaurantff 
=ff 
_restaurantServiceff +
.ff+ , 
GetRestaurantByEmailff, @
(ff@ A
emailffA F
)ffF G
;ffG H
ifgg 

(gg 

restaurantgg 
==gg 
nullgg 
)gg 
{hh 	
returnii 
NotFoundii 
(ii 
)ii 
;ii 
}jj 	
returnkk 
Okkk 
(kk 

restaurantkk 
)kk 
;kk 
}ll 
[oo 
HttpGetoo 
(oo 
$stroo 
)oo 
]oo 
publicpp 

ActionResultpp 
<pp 
IEnumerablepp #
<pp# $
RestaurantDTOpp$ 1
>pp1 2
>pp2 3#
GetAllRestaurantsByCitypp4 K
(ppK L
stringppL R
cityppS W
)ppW X
{qq 
_loggerrr 
.rr 
LogInformationrr 
(rr 
$"rr !
$strrr! N
{rrN O
cityrrO S
}rrS T
$strrrT U
"rrU V
)rrV W
;rrW X
varss 
restaurantsss 
=ss 
_restaurantServicess ,
.ss, -#
GetAllRestaurantsByCityss- D
(ssD E
cityssE I
)ssI J
;ssJ K
returntt 
Oktt 
(tt 
restaurantstt 
)tt 
;tt 
}uu 
}vv ﬁ
AD:\Hotpot\WebApplication1\Controllers\ReportsServiceController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
[ 
	Authorize 
( 
Roles 
= 
$str 
) 
]  
public 

class $
ReportsServiceController )
:* +
ControllerBase, :
{ 
private 
readonly 
IReportsService (
_reportService) 7
;7 8
public $
ReportsServiceController '
(' (
IReportsService( 7
reportService8 E
)E F
{ 	
_reportService 
= 
reportService *
;* +
} 	
[ 	
HttpGet	 
( 
$str #
)# $
]$ %
public 
async 
Task 
< 
ActionResult &
<& '!
OrderStatisticsReport' <
>< =
>= >
GetOrderStatistics? Q
(Q R
)R S
{ 	
var 
report 
= 
await 
_reportService -
.- .#
GetOrderStatisticsAsync. E
(E F
)F G
;G H
return 
Ok 
( 
report 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str (
)( )
]) *
public 
async 
Task 
< 
ActionResult &
<& '&
RestaurantStatisticsReport' A
>A B
>B C#
GetRestaurantStatisticsD [
([ \
)\ ]
{ 	
var 
report 
= 
await 
_reportService -
.- .(
GetRestaurantStatisticsAsync. J
(J K
)K L
;L M
return   
Ok   
(   
report   
)   
;   
}!! 	
[## 	
HttpGet##	 
(## 
$str## "
)##" #
]### $
public$$ 
async$$ 
Task$$ 
<$$ 
ActionResult$$ &
<$$& ' 
UserStatisticsReport$$' ;
>$$; <
>$$< =
GetUserStatistics$$> O
($$O P
)$$P Q
{%% 	
var&& 
report&& 
=&& 
await&& 
_reportService&& -
.&&- ."
GetUserStatisticsAsync&&. D
(&&D E
)&&E F
;&&F G
return'' 
Ok'' 
('' 
report'' 
)'' 
;'' 
}(( 	
[11 	
HttpGet11	 
(11 
$str11 %
)11% &
]11& '
public22 
async22 
Task22 
<22 
ActionResult22 &
<22& '#
PaymentStatisticsReport22' >
>22> ?
>22? @ 
GetPaymentStatistics22A U
(22U V
)22V W
{33 	
var44 
report44 
=44 
await44 
_reportService44 -
.44- .%
GetPaymentStatisticsAsync44. G
(44G H
)44H I
;44I J
return55 
Ok55 
(55 
report55 
)55 
;55 
}66 	
}77 
}88 ÂB
9D:\Hotpot\WebApplication1\Controllers\ReportController.cs
	namespace 	
	HotpotAPI
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
ReportController

 !
:

" #
ControllerBase

$ 2
{ 
private 
readonly 
ReportService &
_reportService' 5
;5 6
public 
ReportController 
(  
ReportService  -
reportService. ;
); <
{ 	
_reportService 
= 
reportService *
;* +
} 	
[ 	
HttpGet	 
( 
$str +
)+ ,
], -
public 
ActionResult 
< 
List  
<  !
MenuItem! )
>) *
>* +
GetVegItems, 7
(7 8
int8 ;
restaurantId< H
)H I
{ 	
var 
vegItems 
= 
_reportService )
.) *#
GetVegItemsByRestaurant* A
(A B
restaurantIdB N
)N O
;O P
return 
Ok 
( 
vegItems 
) 
;  
} 	
[ 	
HttpGet	 
( 
$str /
)/ 0
]0 1
public 
ActionResult 
< 
List  
<  !
MenuItem! )
>) *
>* +
GetNonVegItems, :
(: ;
int; >
restaurantId? K
)K L
{ 	
var 
nonVegItems 
= 
_reportService ,
., -&
GetNonVegItemsByRestaurant- G
(G H
restaurantIdH T
)T U
;U V
return 
Ok 
( 
nonVegItems !
)! "
;" #
} 	
[!! 	
HttpGet!!	 
(!! 
$str!! 2
)!!2 3
]!!3 4
public"" 
ActionResult"" 
<"" 
int"" 
>""  
GetTotalMenuItems""! 2
(""2 3
int""3 6
restaurantId""7 C
)""C D
{## 	
var$$ 

totalItems$$ 
=$$ 
_reportService$$ +
.$$+ ,)
GetTotalMenuItemsByRestaurant$$, I
($$I J
restaurantId$$J V
)$$V W
;$$W X
return%% 
Ok%% 
(%% 

totalItems%%  
)%%  !
;%%! "
}&& 	
[(( 	
HttpGet((	 
((( 
$str(( 2
)((2 3
]((3 4
public)) 
ActionResult)) 
<)) 
int)) 
>))  
GetTotalCategories))! 3
())3 4
int))4 7
restaurantId))8 D
)))D E
{** 	
var++ 

categories++ 
=++ 
_reportService++ +
.+++ ,*
GetTotalCategoriesByRestaurant++, J
(++J K
restaurantId++K W
)++W X
;++X Y
return,, 
Ok,, 
(,, 

categories,,  
),,  !
;,,! "
}-- 	
[// 	
HttpGet//	 
(// 
$str// .
)//. /
]/// 0
public00 
ActionResult00 
<00 
int00 
>00  
GetTotalOrders00! /
(00/ 0
int000 3
restaurantId004 @
)00@ A
{11 	
var22 
totalOrders22 
=22 
_reportService22 ,
.22, -&
GetTotalOrdersByRestaurant22- G
(22G H
restaurantId22H T
)22T U
;22U V
return33 
Ok33 
(33 
totalOrders33 !
)33! "
;33" #
}44 	
[66 	
HttpGet66	 
(66 
$str66 /
)66/ 0
]660 1
public77 
ActionResult77 
<77 
decimal77 #
>77# $
GetTotalRevenue77% 4
(774 5
int775 8
restaurantId779 E
)77E F
{88 	
var99 
totalRevenue99 
=99 
_reportService99 -
.99- .'
GetTotalRevenueByRestaurant99. I
(99I J
restaurantId99J V
)99V W
;99W X
return:: 
Ok:: 
(:: 
totalRevenue:: "
)::" #
;::# $
};; 	
[== 	
HttpGet==	 
(== 
$str== 2
)==2 3
]==3 4
public>> 
ActionResult>> 
<>> 
decimal>> #
>>># $
GetRevenueByPeriod>>% 7
(>>7 8
int>>8 ;
restaurantId>>< H
,>>H I
string>>J P
period>>Q W
)>>W X
{?? 	
var@@ 
revenue@@ 
=@@ 
_reportService@@ (
.@@( )"
GetRevenueByRestaurant@@) ?
(@@? @
restaurantId@@@ L
,@@L M
period@@N T
)@@T U
;@@U V
returnAA 
OkAA 
(AA 
revenueAA 
)AA 
;AA 
}BB 	
[DD 	
HttpGetDD	 
(DD 
$strDD 5
)DD5 6
]DD6 7
publicEE 
ActionResultEE 
<EE 
decimalEE #
>EE# $ 
GetAverageOrderValueEE% 9
(EE9 :
intEE: =
restaurantIdEE> J
)EEJ K
{FF 	
varGG 
avgOrderValueGG 
=GG 
_reportServiceGG  .
.GG. /,
 GetAverageOrderValueByRestaurantGG/ O
(GGO P
restaurantIdGGP \
)GG\ ]
;GG] ^
returnHH 
OkHH 
(HH 
avgOrderValueHH #
)HH# $
;HH$ %
}II 	
[KK 	
HttpGetKK	 
(KK 
$strKK :
)KK: ;
]KK; <
publicLL 
ActionResultLL 
<LL 
ListLL  
<LL  !
MenuItemLL! )
>LL) *
>LL* +
GetTopSellingItemsLL, >
(LL> ?
intLL? B
restaurantIdLLC O
,LLO P
intLLQ T
topNLLU Y
)LLY Z
{MM 	
varNN 
topSellingItemsNN 
=NN  !
_reportServiceNN" 0
.NN0 1*
GetTopSellingItemsByRestaurantNN1 O
(NNO P
restaurantIdNNP \
,NN\ ]
topNNN^ b
)NNb c
;NNc d
returnOO 
OkOO 
(OO 
topSellingItemsOO %
)OO% &
;OO& '
}PP 	
[RR 	
HttpGetRR	 
(RR 
$strRR ?
)RR? @
]RR@ A
publicSS 
ActionResultSS 
<SS 
ListSS  
<SS  !
MenuItemSS! )
>SS) *
>SS* + 
GetLeastSellingItemsSS, @
(SS@ A
intSSA D
restaurantIdSSE Q
,SSQ R
intSSS V
bottomNSSW ^
)SS^ _
{TT 	
varUU 
leastSellingItemsUU !
=UU" #
_reportServiceUU$ 2
.UU2 3,
 GetLeastSellingItemsByRestaurantUU3 S
(UUS T
restaurantIdUUT `
,UU` a
bottomNUUb i
)UUi j
;UUj k
returnVV 
OkVV 
(VV 
leastSellingItemsVV '
)VV' (
;VV( )
}WW 	
[YY 	
HttpGetYY	 
(YY 
$strYY ;
)YY; <
]YY< =
publicZZ 
ActionResultZZ 
<ZZ 
ListZZ  
<ZZ  !
UserZZ! %
>ZZ% &
>ZZ& '
GetRegularUsersZZ( 7
(ZZ7 8
intZZ8 ;
restaurantIdZZ< H
,ZZH I
intZZJ M
	minOrdersZZN W
)ZZW X
{[[ 	
var\\ 
regularUsers\\ 
=\\ 
_reportService\\ -
.\\- .'
GetRegularUsersByRestaurant\\. I
(\\I J
restaurantId\\J V
,\\V W
	minOrders\\X a
)\\a b
;\\b c
return]] 
Ok]] 
(]] 
regularUsers]] "
)]]" #
;]]# $
}^^ 	
}__ 
}`` ‰!
:D:\Hotpot\WebApplication1\Controllers\PaymentController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
PaymentsController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
PaymentsService (
_paymentsService) 9
;9 :
public 
PaymentsController !
(! "
PaymentsService" 1
paymentsService2 A
)A B
{ 	
_paymentsService 
= 
paymentsService .
;. /
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
Payment #
># $

GetPayment% /
(/ 0
int0 3
id4 6
)6 7
{ 	
var 
payment 
= 
_paymentsService *
.* +
GetPaymentById+ 9
(9 :
id: <
)< =
;= >
if 
( 
payment 
== 
null 
)  
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
Ok 
( 
payment 
) 
; 
} 	
[ 	
HttpGet	 
] 
public   
ActionResult   
<   
IEnumerable   '
<  ' (
Payment  ( /
>  / 0
>  0 1
GetAllPayments  2 @
(  @ A
)  A B
{!! 	
return"" 
Ok"" 
("" 
_paymentsService"" &
.""& '
GetAllPayments""' 5
(""5 6
)""6 7
)""7 8
;""8 9
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
IActionResult&& 
CreatePayment&& *
(&&* +
[&&+ ,
FromBody&&, 4
]&&4 5

PaymentDTO&&6 @

paymentDto&&A K
)&&K L
{'' 	
_paymentsService(( 
.(( 
CreatePayment(( *
(((* +

paymentDto((+ 5
)((5 6
;((6 7
return)) 
CreatedAtAction)) "
())" #
nameof))# )
())) *

GetPayment))* 4
)))4 5
,))5 6
new))7 :
{)); <
id))= ?
=))@ A

paymentDto))B L
.))L M
	PaymentID))M V
}))W X
,))X Y

paymentDto))Z d
)))d e
;))e f
}** 	
[,, 	
HttpPut,,	 
(,, 
$str,, 
),, 
],, 
public-- 
IActionResult-- 
UpdatePayment-- *
(--* +
int--+ .
id--/ 1
,--1 2
[--3 4
FromBody--4 <
]--< =

PaymentDTO--> H

paymentDto--I S
)--S T
{.. 	
if// 
(// 
id// 
!=// 

paymentDto//  
.//  !
	PaymentID//! *
)//* +
{00 
return11 

BadRequest11 !
(11! "
)11" #
;11# $
}22 
_paymentsService33 
.33 
UpdatePayment33 *
(33* +
id33+ -
,33- .

paymentDto33/ 9
)339 :
;33: ;
return44 
	NoContent44 
(44 
)44 
;44 
}55 	
[77 	

HttpDelete77	 
(77 
$str77 
)77 
]77 
public88 
IActionResult88 
DeletePayment88 *
(88* +
int88+ .
id88/ 1
)881 2
{99 	
_paymentsService:: 
.:: 
DeletePayment:: *
(::* +
id::+ -
)::- .
;::. /
return;; 
	NoContent;; 
(;; 
);; 
;;; 
}<< 	
}== 
}>> ˜"
>D:\Hotpot\WebApplication1\Controllers\OrderDetailController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class "
OrderDetailsController '
:( )
ControllerBase* 8
{ 
private 
readonly 
OrderDetailsService , 
_orderDetailsService- A
;A B
public "
OrderDetailsController %
(% &
OrderDetailsService& 9
orderDetailsService: M
)M N
{ 	 
_orderDetailsService  
=! "
orderDetailsService# 6
;6 7
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
OrderDetail '
>' (
GetOrderDetails) 8
(8 9
int9 <
id= ?
)? @
{ 	
var 
orderDetails 
=  
_orderDetailsService 3
.3 4
GetOrderDetailsById4 G
(G H
idH J
)J K
;K L
if 
( 
orderDetails 
== 
null  $
)$ %
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
Ok 
( 
orderDetails "
)" #
;# $
} 	
[ 	
HttpGet	 
] 
public   
ActionResult   
<   
IEnumerable   '
<  ' (
OrderDetail  ( 3
>  3 4
>  4 5
GetAllOrderDetails  6 H
(  H I
)  I J
{!! 	
return"" 
Ok"" 
(""  
_orderDetailsService"" *
.""* +
GetAllOrderDetails""+ =
(""= >
)""> ?
)""? @
;""@ A
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
IActionResult&& 
AddOrderDetails&& ,
(&&, -
[&&- .
FromBody&&. 6
]&&6 7
OrderDetailDTO&&8 F
orderDetails&&G S
)&&S T
{'' 	 
_orderDetailsService((  
.((  !
CreateOrderDetails((! 3
(((3 4
orderDetails((4 @
)((@ A
;((A B
return)) 
CreatedAtAction)) "
())" #
nameof))# )
())) *
GetOrderDetails))* 9
)))9 :
,)): ;
new))< ?
{))@ A
id))B D
=))E F
orderDetails))G S
.))S T
OrderID))T [
}))\ ]
,))] ^
orderDetails))_ k
)))k l
;))l m
}** 	
[,, 	
HttpPut,,	 
(,, 
$str,, 
),, 
],, 
public-- 
IActionResult-- 
UpdateOrderDetails-- /
(--/ 0
int--0 3
id--4 6
,--6 7
[--8 9
FromBody--9 A
]--A B
OrderDetailDTO--C Q
orderDetails--R ^
)--^ _
{.. 	
if// 
(// 
id// 
!=// 
orderDetails// "
.//" #
OrderID//# *
)//* +
{00 
return11 

BadRequest11 !
(11! "
)11" #
;11# $
}22  
_orderDetailsService33  
.33  !
UpdateOrderDetails33! 3
(333 4
id334 6
,336 7
orderDetails337 C
)33C D
;33D E
return44 
	NoContent44 
(44 
)44 
;44 
}55 	
[77 	

HttpDelete77	 
(77 
$str77 
)77 
]77 
public88 
IActionResult88 
DeleteOrderDetails88 /
(88/ 0
int880 3
id884 6
)886 7
{99 	 
_orderDetailsService::  
.::  !
DeleteOrderDetails::! 3
(::3 4
id::4 6
)::6 7
;::7 8
return;; 
	NoContent;; 
(;; 
);; 
;;; 
}<< 	
}== 
}>> Ò3
8D:\Hotpot\WebApplication1\Controllers\OrderController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
OrderController  
:! "
ControllerBase# 1
{ 
private 
readonly 
OrderService %
_orderService& 3
;3 4
public 
OrderController 
( 
OrderService +
orderService, 8
)8 9
{ 	
_orderService 
= 
orderService (
;( )
} 	
[ 	
	HttpPatch	 
( 
$str 
) 
] 
public 
IActionResult 
UpdateOrderStatus .
(. /
int/ 2
id3 5
,5 6
[7 8
FromBody8 @
]@ A
stringB H
statusI O
)O P
{ 	
_orderService 
. 
UpdateOrderStatus +
(+ ,
id, .
,. /
status0 6
)6 7
;7 8
return 
	NoContent 
( 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
OrderDTO $
>$ %
GetOrder& .
(. /
int/ 2
id3 5
)5 6
{ 	
var 
orderDto 
= 
_orderService (
.( )
GetOrderById) 5
(5 6
id6 8
)8 9
;9 :
if   
(   
orderDto   
==   
null    
)    !
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
return$$ 
Ok$$ 
($$ 
orderDto$$ 
)$$ 
;$$  
}%% 	
['' 	
HttpGet''	 
('' 
$str''  
)''  !
]''! "
public(( 
ActionResult(( 
<(( 
List((  
<((  !
OrderDTO((! )
>(() *
>((* +
GetOrdersByUserId((, =
(((= >
int((> A
userId((B H
)((H I
{)) 	
var** 
orders** 
=** 
_orderService** &
.**& '
GetOrdersByUserId**' 8
(**8 9
userId**9 ?
)**? @
;**@ A
if++ 
(++ 
orders++ 
==++ 
null++ 
||++ !
!++" #
orders++# )
.++) *
Any++* -
(++- .
)++. /
)++/ 0
{,, 
return-- 
NotFound-- 
(--  
)--  !
;--! "
}.. 
return// 
Ok// 
(// 
orders// 
)// 
;// 
}00 	
[22 	
HttpGet22	 
(22 
$str22 ,
)22, -
]22- .
public33 
ActionResult33 
<33 
List33  
<33  !
OrderDTO33! )
>33) *
>33* +#
GetOrdersByRestaurantId33, C
(33C D
int33D G
restaurantId33H T
)33T U
{44 	
var55 
orders55 
=55 
_orderService55 &
.55& '#
GetOrdersByRestaurantId55' >
(55> ?
restaurantId55? K
)55K L
;55L M
if66 
(66 
orders66 
==66 
null66 
||66 !
!66" #
orders66# )
.66) *
Any66* -
(66- .
)66. /
)66/ 0
{77 
return88 
NotFound88 
(88  
)88  !
;88! "
}99 
return:: 
Ok:: 
(:: 
orders:: 
):: 
;:: 
};; 	
[== 	
HttpGet==	 
]== 
public>> 
ActionResult>> 
<>> 
IEnumerable>> '
<>>' (
OrderDTO>>( 0
>>>0 1
>>>1 2
GetAllOrders>>3 ?
(>>? @
)>>@ A
{?? 	
return@@ 
Ok@@ 
(@@ 
_orderService@@ #
.@@# $
GetAllOrders@@$ 0
(@@0 1
)@@1 2
)@@2 3
;@@3 4
}AA 	
[JJ 	
HttpPostJJ	 
]JJ 
publicKK 
IActionResultKK 
CreateOrderKK (
(KK( )
[KK) *
FromBodyKK* 2
]KK2 3
OrderDTOKK4 <
orderDtoKK= E
)KKE F
{LL 	
_orderServiceMM 
.MM 
CreateOrderMM )
(MM) *
orderDtoMM* 2
)MM2 3
;MM3 4
returnNN 
OkNN 
(NN 
orderDtoNN "
)NN" #
;NN# $
}PP 	
[SS 	
HttpPutSS	 
(SS 
$strSS 
)SS 
]SS 
publicTT 
IActionResultTT 
UpdateOrderTT (
(TT( )
intTT) ,
idTT- /
,TT/ 0
[TT1 2
FromBodyTT2 :
]TT: ;
OrderDTOTT< D
orderDtoTTE M
)TTM N
{UU 	
ifVV 
(VV 
idVV 
!=VV 
orderDtoVV 
.VV 
OrderIDVV &
)VV& '
{WW 
returnXX 

BadRequestXX !
(XX! "
)XX" #
;XX# $
}YY 
_orderServiceZZ 
.ZZ 
UpdateOrderZZ %
(ZZ% &
idZZ& (
,ZZ( )
orderDtoZZ) 1
)ZZ1 2
;ZZ2 3
return[[ 
	NoContent[[ 
([[ 
)[[ 
;[[ 
}\\ 	
[^^ 	

HttpDelete^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 
IActionResult__ 
DeleteOrder__ (
(__( )
int__) ,
id__- /
)__/ 0
{`` 	
_orderServiceaa 
.aa 
DeleteOrderaa %
(aa% &
idaa& (
)aa( )
;aa) *
returnbb 
	NoContentbb 
(bb 
)bb 
;bb 
}cc 	
}dd 
}ee ÿk
<D:\Hotpot\WebApplication1\Controllers\MenuItemsController.cs
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		 
MenuItemController		 
:		  !
ControllerBase		" 0
{

 
private 
readonly 
MenuItemService $
_menuItemService% 5
;5 6
private 
readonly 
ILogger 
< 
MenuItemController /
>/ 0
_logger1 8
;8 9
public 

MenuItemController 
( 
MenuItemService -
menuItemService. =
,= >
ILogger? F
<F G
MenuItemControllerG Y
>Y Z
logger[ a
)a b
{ 
_menuItemService 
= 
menuItemService *
;* +
_logger 
= 
logger 
; 
} 
[ 
HttpGet 
] 
public 

ActionResult 
< 
IEnumerable #
<# $
MenuItemDTO$ /
>/ 0
>0 1
GetAllMenuItems2 A
(A B
)B C
{ 
_logger 
. 
LogInformation 
( 
$str :
): ;
;; <
var 
	menuItems 
= 
_menuItemService (
.( )
GetAllMenuItems) 8
(8 9
)9 :
;: ;
return 
Ok 
( 
	menuItems 
) 
; 
} 
[ 
HttpGet 
( 
$str "
)" #
]# $
public 

IActionResult #
GetAllDistinctMenuItems 0
(0 1
)1 2
{ 
_logger   
.   
LogInformation   
(   
$str   N
)  N O
;  O P
try"" 
{## 	
var$$ 
distinctMenuItems$$ !
=$$" #
_menuItemService$$$ 4
.$$4 5#
GetAllDistinctMenuItems$$5 L
($$L M
)$$M N
;$$N O
if&& 
(&& 
distinctMenuItems&& !
==&&" $
null&&% )
||&&* ,
!&&- .
distinctMenuItems&&. ?
.&&? @
Any&&@ C
(&&C D
)&&D E
)&&E F
{'' 
_logger(( 
.(( 

LogWarning(( "
(((" #
$str((# B
)((B C
;((C D
return)) 
NotFound)) 
())  
$str))  ?
)))? @
;))@ A
}** 
return,, 
Ok,, 
(,, 
distinctMenuItems,, '
),,' (
;,,( )
}-- 	
catch.. 
(.. 
	Exception.. 
ex.. 
).. 
{// 	
_logger00 
.00 
LogError00 
(00 
ex00 
,00  
$str00! X
)00X Y
;00Y Z
return11 

StatusCode11 
(11 
$num11 !
,11! "
$str11# Z
)11Z [
;11[ \
}22 	
}33 
[77 
HttpGet77 
(77 
$str77 
)77 
]77 
public88 

ActionResult88 
<88 
MenuItemDTO88 #
>88# $
GetMenuItemById88% 4
(884 5
int885 8
id889 ;
)88; <
{99 
_logger:: 
.:: 
LogInformation:: 
(:: 
$":: !
$str::! 5
{::5 6
id::6 8
}::8 9
$str::9 @
"::@ A
)::A B
;::B C
var;; 
menuItem;; 
=;; 
_menuItemService;; '
.;;' (
GetMenuItemById;;( 7
(;;7 8
id;;8 :
);;: ;
;;;; <
if<< 

(<< 
menuItem<< 
==<< 
null<< 
)<< 
return<< $
NotFound<<% -
(<<- .
)<<. /
;<</ 0
return== 
Ok== 
(== 
menuItem== 
)== 
;== 
}>> 
[?? 
HttpGet?? 
(?? 
$str?? 
)?? 
]?? 
public@@ 

ActionResult@@ 
<@@ 
List@@ 
<@@ 
MenuItemDTO@@ (
>@@( )
>@@) * 
GetMenuItemsByMenuId@@+ ?
(@@? @
int@@@ C
menuId@@D J
)@@J K
{AA 
_loggerBB 
.BB 
LogInformationBB 
(BB 
$"BB !
$strBB! ;
{BB; <
menuIdBB< B
}BBB C
$strBBC J
"BBJ K
)BBK L
;BBL M
varCC 
	menuItemsCC 
=CC 
_menuItemServiceCC (
.CC( ) 
GetMenuItemsByMenuIdCC) =
(CC= >
menuIdCC> D
)CCD E
;CCE F
ifEE 

(EE 
	menuItemsEE 
==EE 
nullEE 
||EE  
!EE! "
	menuItemsEE" +
.EE+ ,
AnyEE, /
(EE/ 0
)EE0 1
)EE1 2
returnFF 
NotFoundFF 
(FF 
)FF 
;FF 
returnHH 
OkHH 
(HH 
	menuItemsHH 
)HH 
;HH 
}II 
[KK 
HttpPostKK 
]KK 
publicLL 

ActionResultLL 
CreateMenuItemLL &
(LL& '
MenuItemDTOLL' 2
menuItemDtoLL3 >
)LL> ?
{MM 
_loggerNN 
.NN 
LogInformationNN 
(NN 
$strNN =
)NN= >
;NN> ?
_menuItemServiceOO 
.OO 
CreateMenuItemOO '
(OO' (
menuItemDtoOO( 3
)OO3 4
;OO4 5
returnPP 
CreatedAtActionPP 
(PP 
nameofPP %
(PP% &
GetMenuItemByIdPP& 5
)PP5 6
,PP6 7
newPP8 ;
{PP< =
idPP> @
=PPA B
menuItemDtoPPC N
.PPN O

MenuItemIDPPO Y
}PPZ [
,PP[ \
menuItemDtoPP] h
)PPh i
;PPi j
}QQ 
[SS 
HttpPutSS 
(SS 
$strSS 
)SS 
]SS 
publicTT 

ActionResultTT 
UpdateMenuItemTT &
(TT& '
intTT' *
idTT+ -
,TT- .
MenuItemDTOTT/ :
menuItemDtoTT; F
)TTF G
{UU 
_loggerVV 
.VV 
LogInformationVV 
(VV 
$"VV !
$strVV! 9
{VV9 :
idVV: <
}VV< =
$strVV= D
"VVD E
)VVE F
;VVF G
ifWW 

(WW 
idWW 
!=WW 
menuItemDtoWW 
.WW 

MenuItemIDWW (
)WW( )
returnWW* 0

BadRequestWW1 ;
(WW; <
)WW< =
;WW= >
_menuItemServiceXX 
.XX 
UpdateMenuItemXX '
(XX' (
idXX( *
,XX* +
menuItemDtoXX+ 6
)XX6 7
;XX7 8
returnYY 
	NoContentYY 
(YY 
)YY 
;YY 
}ZZ 
[\\ 

HttpDelete\\ 
(\\ 
$str\\ 
)\\ 
]\\ 
public]] 

ActionResult]] 
DeleteMenuItem]] &
(]]& '
int]]' *
id]]+ -
)]]- .
{^^ 
_logger__ 
.__ 
LogInformation__ 
(__ 
$"__ !
$str__! 5
{__5 6
id__6 8
}__8 9
$str__9 @
"__@ A
)__A B
;__B C
_menuItemService`` 
.`` 
DeleteMenuItem`` '
(``' (
id``( *
)``* +
;``+ ,
returnaa 
	NoContentaa 
(aa 
)aa 
;aa 
}bb 
[dd 
HttpGetdd 
(dd 
$strdd "
)dd" #
]dd# $
publicee 

ActionResultee 
<ee 
IEnumerableee #
<ee# $
MenuItemDTOee$ /
>ee/ 0
>ee0 1"
GetMenuItemsByCategoryee2 H
(eeH I
stringeeI O
categoryeeP X
)eeX Y
{ff 
_loggergg 
.gg 
LogInformationgg 
(gg 
$"gg !
$strgg! M
{ggM N
categoryggN V
}ggV W
$strggW X
"ggX Y
)ggY Z
;ggZ [
varhh 
itemshh 
=hh 
_menuItemServicehh $
.hh$ %"
GetMenuItemsByCategoryhh% ;
(hh; <
categoryhh< D
)hhD E
;hhE F
returnii 
Okii 
(ii 
itemsii 
)ii 
;ii 
}jj 
[ll 
HttpGetll 
(ll 
$strll 
)ll 
]ll 
publicmm 

ActionResultmm 
<mm 
IEnumerablemm #
<mm# $
MenuItemDTOmm$ /
>mm/ 0
>mm0 1$
GetMenuItemsByLeastPricemm2 J
(mmJ K
)mmK L
{nn 
_loggeroo 
.oo 
LogInformationoo 
(oo 
$stroo P
)ooP Q
;ooQ R
varpp 
itemspp 
=pp 
_menuItemServicepp $
.pp$ %$
GetMenuItemsByLeastPricepp% =
(pp= >
)pp> ?
;pp? @
returnqq 
Okqq 
(qq 
itemsqq 
)qq 
;qq 
}rr 
[tt 
HttpGettt 
(tt 
$strtt %
)tt% &
]tt& '
publicuu 

ActionResultuu 
<uu 
IEnumerableuu #
<uu# $
MenuItemDTOuu$ /
>uu/ 0
>uu0 1#
GetMenuItemsByTasteInfouu2 I
(uuI J
stringuuJ P
	tasteInfouuQ Z
)uuZ [
{vv 
_loggerww 
.ww 
LogInformationww 
(ww 
$"ww !
$strww! O
{wwO P
	tasteInfowwP Y
}wwY Z
$strwwZ [
"ww[ \
)ww\ ]
;ww] ^
varxx 
itemsxx 
=xx 
_menuItemServicexx $
.xx$ %#
GetMenuItemsByTasteInfoxx% <
(xx< =
	tasteInfoxx= F
)xxF G
;xxG H
returnyy 
Okyy 
(yy 
itemsyy 
)yy 
;yy 
}zz 
[|| 
HttpGet|| 
(|| 
$str|| 8
)||8 9
]||9 :
public}} 

ActionResult}} 
<}} 
IEnumerable}} #
<}}# $
MenuItemDTO}}$ /
>}}/ 0
>}}0 1,
 GetMenuItemsBySpecialDietaryInfo}}2 R
(}}R S
string}}S Y
specialDietaryInfo}}Z l
)}}l m
{~~ 
_logger 
. 
LogInformation 
( 
$" !
$str! Y
{Y Z
specialDietaryInfoZ l
}l m
$strm n
"n o
)o p
;p q
var
ÄÄ 
items
ÄÄ 
=
ÄÄ 
_menuItemService
ÄÄ $
.
ÄÄ$ %.
 GetMenuItemsBySpecialDietaryInfo
ÄÄ% E
(
ÄÄE F 
specialDietaryInfo
ÄÄF X
)
ÄÄX Y
;
ÄÄY Z
return
ÅÅ 
Ok
ÅÅ 
(
ÅÅ 
items
ÅÅ 
)
ÅÅ 
;
ÅÅ 
}
ÇÇ 
[
ÑÑ 
HttpGet
ÑÑ 
(
ÑÑ 
$str
ÑÑ 1
)
ÑÑ1 2
]
ÑÑ2 3
public
ÖÖ 

ActionResult
ÖÖ 
<
ÖÖ 
IEnumerable
ÖÖ #
<
ÖÖ# $
MenuItemDTO
ÖÖ$ /
>
ÖÖ/ 0
>
ÖÖ0 1+
GetMenuItemsByNutritionalInfo
ÖÖ2 O
(
ÖÖO P
string
ÖÖP V
nutritionalInfo
ÖÖW f
)
ÖÖf g
{
ÜÜ 
_logger
áá 
.
áá 
LogInformation
áá 
(
áá 
$"
áá !
$str
áá! U
{
ááU V
nutritionalInfo
ááV e
}
ááe f
$str
ááf g
"
áág h
)
ááh i
;
áái j
var
àà 
items
àà 
=
àà 
_menuItemService
àà $
.
àà$ %+
GetMenuItemsByNutritionalInfo
àà% B
(
ààB C
nutritionalInfo
ààC R
)
ààR S
;
ààS T
return
ââ 
Ok
ââ 
(
ââ 
items
ââ 
)
ââ 
;
ââ 
}
ää 
[
åå 
HttpGet
åå 
(
åå 
$str
åå 
)
åå 
]
åå 
public
çç 

ActionResult
çç 
<
çç 
IEnumerable
çç #
<
çç# $
MenuItemDTO
çç$ /
>
çç/ 0
>
çç0 1(
GetMenuItemsByHighDiscount
çç2 L
(
ççL M
)
ççM N
{
éé 
_logger
èè 
.
èè 
LogInformation
èè 
(
èè 
$str
èè T
)
èèT U
;
èèU V
var
êê 
items
êê 
=
êê 
_menuItemService
êê $
.
êê$ %(
GetMenuItemsByHighDiscount
êê% ?
(
êê? @
)
êê@ A
;
êêA B
return
ëë 
Ok
ëë 
(
ëë 
items
ëë 
)
ëë 
;
ëë 
}
íí 
}ìì ™@
7D:\Hotpot\WebApplication1\Controllers\MenuController.cs
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public

 
class

 
MenuController

 
:

 
ControllerBase

 ,
{ 
private 
readonly 
MenuService  
_menuService! -
;- .
private 
readonly 
ILogger 
< 
MenuController +
>+ ,
_logger- 4
;4 5
public 

MenuController 
( 
MenuService %
menuService& 1
,1 2
ILogger3 :
<: ;
MenuController; I
>I J
loggerK Q
)Q R
{ 
_menuService 
= 
menuService "
;" #
_logger 
= 
logger 
; 
} 
[ 
HttpGet 
] 
public 

ActionResult 
< 
IEnumerable #
<# $
MenuDTO$ +
>+ ,
>, -
GetAllMenus. 9
(9 :
): ;
{ 
_logger 
. 
LogInformation 
( 
$str 5
)5 6
;6 7
var 
menus 
= 
_menuService  
.  !
GetAllMenus! ,
(, -
)- .
;. /
return 
Ok 
( 
menus 
) 
; 
} 
[ 
HttpGet 
( 
$str 
) 
] 
public 

ActionResult 
< 
MenuDTO 
>  
GetMenuById! ,
(, -
int- 0
id1 3
)3 4
{ 
_logger   
.   
LogInformation   
(   
$"   !
$str  ! 0
{  0 1
id  1 3
}  3 4
$str  4 ;
"  ; <
)  < =
;  = >
var!! 
menu!! 
=!! 
_menuService!! 
.!!  
GetMenuById!!  +
(!!+ ,
id!!, .
)!!. /
;!!/ 0
if"" 

("" 
menu"" 
=="" 
null"" 
)"" 
return""  
NotFound""! )
("") *
)""* +
;""+ ,
return## 
Ok## 
(## 
menu## 
)## 
;## 
}$$ 
[&& 
HttpGet&& 
(&& 
$str&& (
)&&( )
]&&) *
public'' 

ActionResult'' 
<'' 
List'' 
<'' 
MenuDTO'' $
>''$ %
>''% &"
GetMenusByRestaurantId''' =
(''= >
int''> A
restaurantId''B N
)''N O
{(( 
_logger)) 
.)) 
LogInformation)) 
()) 
$")) !
$str))! <
{))< =
restaurantId))= I
}))I J
$str))J Q
"))Q R
)))R S
;))S T
var++ 
menus++ 
=++ 
_menuService++  
.++  !"
GetMenusByRestaurantId++! 7
(++7 8
restaurantId++8 D
)++D E
;++E F
if-- 

(-- 
menus-- 
==-- 
null-- 
||-- 
!-- 
menus-- #
.--# $
Any--$ '
(--' (
)--( )
)--) *
{.. 	
_logger// 
.// 

LogWarning// 
(// 
$"// !
$str//! B
{//B C
restaurantId//C O
}//O P
"//P Q
)//Q R
;//R S
return00 
NotFound00 
(00 
)00 
;00 
}11 	
_logger33 
.33 
LogInformation33 
(33 
$"33 !
$str33! N
{33N O
restaurantId33O [
}33[ \
"33\ ]
)33] ^
;33^ _
return44 
Ok44 
(44 
menus44 
)44 
;44 
}55 
[88 
HttpPost88 
]88 
public99 

ActionResult99 

CreateMenu99 "
(99" #
MenuDTO99# *
menuDto99+ 2
)992 3
{:: 
_logger;; 
.;; 
LogInformation;; 
(;; 
$str;; 8
);;8 9
;;;9 :
_menuService<< 
.<< 

CreateMenu<< 
(<<  
menuDto<<  '
)<<' (
;<<( )
return== 
Ok== 
(== 
)== 
;== 
}>> 
[@@ 
HttpPut@@ 
(@@ 
$str@@ 
)@@ 
]@@ 
publicAA 

ActionResultAA 

UpdateMenuAA "
(AA" #
intAA# &
idAA' )
,AA) *
MenuDTOAA+ 2
menuDtoAA3 :
)AA: ;
{BB 
_loggerCC 
.CC 
LogInformationCC 
(CC 
$"CC !
$strCC! 4
{CC4 5
idCC5 7
}CC7 8
$strCC8 ?
"CC? @
)CC@ A
;CCA B
ifDD 

(DD 
idDD 
!=DD 
menuDtoDD 
.DD 
MenuIDDD  
)DD  !
returnDD" (

BadRequestDD) 3
(DD3 4
)DD4 5
;DD5 6
_menuServiceEE 
.EE 

UpdateMenuEE 
(EE  
idEE  "
,EE" #
menuDtoEE# *
)EE* +
;EE+ ,
returnFF 
	NoContentFF 
(FF 
)FF 
;FF 
}GG 
[II 

HttpDeleteII 
(II 
$strII 
)II 
]II 
publicJJ 

ActionResultJJ 

DeleteMenuJJ "
(JJ" #
intJJ# &
idJJ' )
)JJ) *
{KK 
_loggerLL 
.LL 
LogInformationLL 
(LL 
$"LL !
$strLL! 0
{LL0 1
idLL1 3
}LL3 4
$strLL4 ;
"LL; <
)LL< =
;LL= >
_menuServiceMM 
.MM 

DeleteMenuMM 
(MM  
idMM  "
)MM" #
;MM# $
returnNN 
	NoContentNN 
(NN 
)NN 
;NN 
}OO 
[QQ 
HttpGetQQ 
(QQ 
$strQQ $
)QQ$ %
]QQ% &
publicRR 

ActionResultRR 
<RR 
intRR 
?RR 
>RR #
GetRestaurantIdByMenuIdRR 5
(RR5 6
intRR6 9
menuIdRR: @
)RR@ A
{SS 
_loggerTT 
.TT 
LogInformationTT 
(TT 
$"TT !
$strTT! ?
{TT? @
menuIdTT@ F
}TTF G
$strTTG N
"TTN O
)TTO P
;TTP Q
varUU 
restaurantIdUU 
=UU 
_menuServiceUU '
.UU' (#
GetRestaurantIdByMenuIdUU( ?
(UU? @
menuIdUU@ F
)UUF G
;UUG H
ifWW 

(WW 
restaurantIdWW 
==WW 
nullWW  
)WW  !
{XX 	
_loggerYY 
.YY 

LogWarningYY 
(YY 
$"YY !
$strYY! A
{YYA B
menuIdYYB H
}YYH I
"YYI J
)YYJ K
;YYK L
returnZZ 
NotFoundZZ 
(ZZ 
)ZZ 
;ZZ 
}[[ 	
_logger]] 
.]] 
LogInformation]] 
(]] 
$"]] !
$str]]! D
{]]D E
restaurantId]]E Q
}]]Q R
$str]]R _
{]]_ `
menuId]]` f
}]]f g
"]]g h
)]]h i
;]]i j
return^^ 
Ok^^ 
(^^ 
restaurantId^^ 
)^^ 
;^^  
}__ 
}aa ø/
:D:\Hotpot\WebApplication1\Controllers\JwtAuthController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
JwtAuthController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
public 
JwtAuthController  
(  !
IConfiguration! /
configuration0 =
,= >
IUserRepository? N
userRepositoryO ]
)] ^
{ 	
_configuration 
= 
configuration *
;* +
_userRepository 
= 
userRepository ,
;, -
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
IActionResult 
Login "
(" #
[# $
FromBody$ ,
], -
LoginRequest. :
request; B
)B C
{ 	
if 
( 
string 
. 
IsNullOrEmpty $
($ %
request% ,
., -
Username- 5
)5 6
||7 9
string: @
.@ A
IsNullOrEmptyA N
(N O
requestO V
.V W
PasswordW _
)_ `
)` a
{ 
return 

BadRequest !
(! "
$str" 7
)7 8
;8 9
} 
var!! 
user!! 
=!! 
_userRepository!! &
.!!& '
GetUserByUsername!!' 8
(!!8 9
request!!9 @
.!!@ A
Username!!A I
)!!I J
;!!J K
if## 
(## 
user## 
==## 
null## 
||## 
!## 
VerifyPassword## -
(##- .
user##. 2
,##2 3
request##4 ;
.##; <
Password##< D
)##D E
)##E F
{$$ 
return%% 
Unauthorized%% #
(%%# $
$str%%$ B
)%%B C
;%%C D
}&& 
var)) 
tokenHandler)) 
=)) 
new)) "#
JwtSecurityTokenHandler))# :
()): ;
))); <
;))< =
var** 
key** 
=** 
_configuration** $
.**$ %
GetValue**% -
<**- .
string**. 4
>**4 5
(**5 6
$str**6 J
)**J K
;**K L
var++ 
keyBytes++ 
=++ 
Encoding++ #
.++# $
ASCII++$ )
.++) *
GetBytes++* 2
(++2 3
key++3 6
)++6 7
;++7 8
var,, 
tokenDescriptor,, 
=,,  !
new,," %#
SecurityTokenDescriptor,,& =
{-- 
Subject.. 
=.. 
new.. 
ClaimsIdentity.. ,
(.., -
new..- 0
Claim..1 6
[..6 7
]..7 8
{// 
new00 
Claim00 
(00 

ClaimTypes00 (
.00( )
Name00) -
,00- .
request00/ 6
.006 7
Username007 ?
)00? @
,00@ A
new11 
Claim11 
(11 

ClaimTypes11 (
.11( )
NameIdentifier11) 7
,117 8
user119 =
.11= >
UserID11> D
.11D E
ToString11E M
(11M N
)11N O
)11O P
,11P Q
new22 
Claim22 
(22 

ClaimTypes22 (
.22( )
Role22) -
,22- .
user22/ 3
.223 4
Role224 8
)228 9
}33 
)33 
,33 
Expires44 
=44 
DateTime44 "
.44" #
UtcNow44# )
.44) *
AddHours44* 2
(442 3
$num443 4
)444 5
,445 6
SigningCredentials55 "
=55# $
new55% (
SigningCredentials55) ;
(55; <
new55< ? 
SymmetricSecurityKey55@ T
(55T U
keyBytes55U ]
)55] ^
,55^ _
SecurityAlgorithms55` r
.55r s 
HmacSha256Signature	55s Ü
)
55Ü á
}66 
;66 
var77 
token77 
=77 
tokenHandler77 $
.77$ %
CreateToken77% 0
(770 1
tokenDescriptor771 @
)77@ A
;77A B
var88 
tokenString88 
=88 
tokenHandler88 *
.88* +

WriteToken88+ 5
(885 6
token886 ;
)88; <
;88< =
return:: 
Ok:: 
(:: 
new:: 
{:: 
Token:: !
=::" #
tokenString::$ /
}::0 1
)::1 2
;::2 3
};; 	
private?? 
bool?? 
VerifyPassword?? #
(??# $
User??$ (
user??) -
,??- .
string??/ 5
password??6 >
)??> ?
{@@ 	
returnBB 
userBB 
.BB 
PasswordBB  
==BB! #
passwordBB$ ,
;BB, -
}CC 	
publicFF 
classFF 
LoginRequestFF !
{GG 	
publicHH 
stringHH 
UsernameHH "
{HH# $
getHH% (
;HH( )
setHH* -
;HH- .
}HH/ 0
publicII 
stringII 
PasswordII "
{II# $
getII% (
;II( )
setII* -
;II- .
}II/ 0
}JJ 	
}KK 
}LL »,
AD:\Hotpot\WebApplication1\Controllers\FeedbackRatingController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class %
FeedbackRatingsController *
:+ ,
ControllerBase- ;
{ 
private 
readonly "
FeedbackRatingsService /#
_feedbackRatingsService0 G
;G H
public %
FeedbackRatingsController (
(( )"
FeedbackRatingsService) ?"
feedbackRatingsService@ V
)V W
{ 	#
_feedbackRatingsService #
=$ %"
feedbackRatingsService& <
;< =
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
FeedbackRating *
>* +
GetFeedbackRating, =
(= >
int> A
idB D
)D E
{ 	
var 
feedbackRating 
=  #
_feedbackRatingsService! 8
.8 9!
GetFeedbackRatingById9 N
(N O
idO Q
)Q R
;R S
if 
( 
feedbackRating 
== !
null" &
)& '
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
Ok 
( 
feedbackRating $
)$ %
;% &
} 	
[ 	
HttpGet	 
( 
$str ,
), -
]- .
public   
ActionResult   
<   
List    
<    !
FeedbackRatingDTO  ! 2
>  2 3
>  3 4,
 GetFeedbackRatingsByRestaurantId  5 U
(  U V
int  V Y
restaurantId  Z f
)  f g
{!! 	
var"" 
feedbackRatings"" 
=""  !#
_feedbackRatingsService""" 9
.""9 :,
 GetFeedbackRatingsByRestaurantId"": Z
(""Z [
restaurantId""[ g
)""g h
;""h i
if## 
(## 
feedbackRatings## 
==##  "
null### '
||##( *
!##+ ,
feedbackRatings##, ;
.##; <
Any##< ?
(##? @
)##@ A
)##A B
{$$ 
return%% 
NotFound%% 
(%%  
)%%  !
;%%! "
}&& 
return'' 
Ok'' 
('' 
feedbackRatings'' %
)''% &
;''& '
}(( 	
[++ 	
HttpGet++	 
]++ 
public,, 
ActionResult,, 
<,, 
IEnumerable,, '
<,,' (
FeedbackRating,,( 6
>,,6 7
>,,7 8!
GetAllFeedbackRatings,,9 N
(,,N O
),,O P
{-- 	
return.. 
Ok.. 
(.. #
_feedbackRatingsService.. -
...- .!
GetAllFeedbackRatings... C
(..C D
)..D E
)..E F
;..F G
}// 	
[11 	
HttpPost11	 
]11 
public22 
IActionResult22 
AddFeedbackRating22 .
(22. /
[22/ 0
FromBody220 8
]228 9
FeedbackRatingDTO22: K
feedbackRatingDto22L ]
)22] ^
{33 	#
_feedbackRatingsService44 #
.44# $ 
CreateFeedbackRating44$ 8
(448 9
feedbackRatingDto449 J
)44J K
;44K L
return55 
CreatedAtAction55 "
(55" #
nameof55# )
(55) *
GetFeedbackRating55* ;
)55; <
,55< =
new55> A
{55B C
id55D F
=55G H
feedbackRatingDto55I Z
.55Z [
FeedbackRatingID55[ k
}55l m
,55m n
feedbackRatingDto	55o Ä
)
55Ä Å
;
55Å Ç
}66 	
[88 	
HttpPut88	 
(88 
$str88 
)88 
]88 
public99 
IActionResult99  
UpdateFeedbackRating99 1
(991 2
int992 5
id996 8
,998 9
[99: ;
FromBody99; C
]99C D
FeedbackRatingDTO99E V
feedbackRatingDto99W h
)99h i
{:: 	
if;; 
(;; 
id;; 
!=;; 
feedbackRatingDto;; '
.;;' (
FeedbackRatingID;;( 8
);;8 9
{<< 
return== 

BadRequest== !
(==! "
)==" #
;==# $
}>> #
_feedbackRatingsService?? #
.??# $ 
UpdateFeedbackRating??$ 8
(??8 9
id??9 ;
,??; <
feedbackRatingDto??< M
)??M N
;??N O
return@@ 
	NoContent@@ 
(@@ 
)@@ 
;@@ 
}AA 	
[CC 	

HttpDeleteCC	 
(CC 
$strCC 
)CC 
]CC 
publicDD 
IActionResultDD  
DeleteFeedbackRatingDD 1
(DD1 2
intDD2 5
idDD6 8
)DD8 9
{EE 	#
_feedbackRatingsServiceFF #
.FF# $ 
DeleteFeedbackRatingFF$ 8
(FF8 9
idFF9 ;
)FF; <
;FF< =
returnGG 
	NoContentGG 
(GG 
)GG 
;GG 
}HH 	
}II 
}JJ ¿
;D:\Hotpot\WebApplication1\Controllers\CheckoutController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
CheckoutController

 #
:

$ %
ControllerBase

& 4
{ 
private 
readonly 
CheckoutService (
_checkoutService) 9
;9 :
public 
CheckoutController !
(! "
CheckoutService" 1
checkoutService2 A
)A B
{ 	
_checkoutService 
= 
checkoutService .
;. /
} 	
[ 	
HttpPost	 
( 
$str 
)  
]  !
public 
IActionResult 
	AddToCart &
(& '
[' (
FromBody( 0
]0 1
CartDTO2 9
cartDTO: A
)A B
{ 	
_checkoutService 
. 
AddItemToCart *
(* +
cartDTO+ 2
)2 3
;3 4
return 
Ok 
( 
) 
; 
} 	
[ 	
HttpPost	 
( 
$str 
)  
]  !
public 
IActionResult 

PlaceOrder '
(' (
[( )
FromBody) 1
]1 2
OrderDTO3 ;
orderDTO< D
)D E
{ 	
_checkoutService 
. 

PlaceOrder '
(' (
orderDTO( 0
)0 1
;1 2
return 
Ok 
( 
) 
; 
} 	
[!! 	
HttpPost!!	 
(!! 
$str!! #
)!!# $
]!!$ %
public"" 
IActionResult"" 
ProcessPayment"" +
(""+ ,
["", -
FromBody""- 5
]""5 6

PaymentDTO""7 A

paymentDTO""B L
)""L M
{## 	
_checkoutService$$ 
.$$ 
ProcessPayment$$ +
($$+ ,

paymentDTO$$, 6
)$$6 7
;$$7 8
return%% 
Ok%% 
(%% 
)%% 
;%% 
}&& 	
}'' 
}(( Ë 
7D:\Hotpot\WebApplication1\Controllers\CartController.cs
	namespace 	
WebApplication1
 
. 
Controllers %
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
CartController 
:  !
ControllerBase" 0
{ 
private 
readonly 
CartService $
_cartService% 1
;1 2
public 
CartController 
( 
CartService )
cartService* 5
)5 6
{ 	
_cartService 
= 
cartService &
;& '
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
CartDTO #
># $
GetCart% ,
(, -
int- 0
id1 3
)3 4
{ 	
var 
cartDto 
= 
_cartService &
.& '
GetCartById' 2
(2 3
id3 5
)5 6
;6 7
if 
( 
cartDto 
== 
null 
)  
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
Ok 
( 
cartDto 
) 
; 
} 	
[ 	
HttpGet	 
] 
public   
ActionResult   
<   
IEnumerable   '
<  ' (
CartDTO  ( /
>  / 0
>  0 1
GetAllCarts  2 =
(  = >
)  > ?
{!! 	
return"" 
Ok"" 
("" 
_cartService"" "
.""" #
GetAllCarts""# .
("". /
)""/ 0
)""0 1
;""1 2
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
IActionResult&& 
AddCart&& $
(&&$ %
[&&% &
FromBody&&& .
]&&. /
CartDTO&&0 7
cartDto&&8 ?
)&&? @
{'' 	
_cartService(( 
.(( 

CreateCart(( #
(((# $
cartDto(($ +
)((+ ,
;((, -
return)) 
CreatedAtAction)) "
())" #
nameof))# )
())) *
GetCart))* 1
)))1 2
,))2 3
new))4 7
{))8 9
id)): <
=))= >
cartDto))? F
.))F G
CartID))G M
}))N O
,))O P
cartDto))Q X
)))X Y
;))Y Z
}** 	
[,, 	
HttpPut,,	 
(,, 
$str,, 
),, 
],, 
public-- 
IActionResult-- 

UpdateCart-- '
(--' (
int--( +
id--, .
,--. /
[--0 1
FromBody--1 9
]--9 :
CartDTO--; B
cartDto--C J
)--J K
{.. 	
if// 
(// 
id// 
!=// 
cartDto// 
.// 
CartID// $
)//$ %
{00 
return11 

BadRequest11 !
(11! "
)11" #
;11# $
}22 
_cartService33 
.33 

UpdateCart33 #
(33# $
id33$ &
,33& '
cartDto33' .
)33. /
;33/ 0
return44 
	NoContent44 
(44 
)44 
;44 
}55 	
[77 	

HttpDelete77	 
(77 
$str77 
)77 
]77 
public88 
IActionResult88 

DeleteCart88 '
(88' (
int88( +
id88, .
)88. /
{99 	
_cartService:: 
.:: 

DeleteCart:: #
(::# $
id::$ &
)::& '
;::' (
return;; 
	NoContent;; 
(;; 
);; 
;;; 
}<< 	
}== 
}>> Ω[
AD:\Hotpot\WebApplication1\Controllers\AdminDashboardController.cs
	namespace		 	
WebApplication1		
 
.		 
Controllers		 %
{

 
[ 

ApiVersion 
( 
$str 
) 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class $
AdminDashboardController )
:* +
ControllerBase, :
{ 
private 
readonly 
IAdminDashboard ("
_adminDashboardService) ?
;? @
public $
AdminDashboardController '
(' (
IAdminDashboard( 7!
adminDashboardService8 M
)M N
{ 	"
_adminDashboardService "
=# $!
adminDashboardService% :
;: ;
} 	
[ 	
HttpGet	 
( 
$str 2
)2 3
]3 4
public 
ActionResult 
< 

Dictionary &
<& '
string' -
,- .
int/ 2
>2 3
>3 4!
GetVegNonVegItemCount5 J
(J K
intK N
restaurantIdO [
)[ \
{ 	
try 
{ 
var 
vegNonVegCount "
=# $"
_adminDashboardService% ;
.; <!
GetVegNonVegItemCount< Q
(Q R
restaurantIdR ^
)^ _
;_ `
return 
Ok 
( 
vegNonVegCount (
)( )
;) *
} 
catch   
(   
	Exception   
ex   
)    
{!! 
return"" 

StatusCode"" !
(""! "
$num""" %
,""% &
$"""' )
$str"") @
{""@ A
ex""A C
.""C D
Message""D K
}""K L
"""L M
)""M N
;""N O
}## 
}$$ 	
[&& 	
HttpGet&&	 
(&& 
$str&& #
)&&# $
]&&$ %
public'' 
ActionResult'' 
<'' 
List''  
<''  !
Order''! &
>''& '
>''' ("
GetOrdersFromLast7Days'') ?
(''? @
)''@ A
{(( 	
try)) 
{** 
var++ 
orders++ 
=++ "
_adminDashboardService++ 3
.++3 4"
GetOrdersFromLast7Days++4 J
(++J K
)++K L
;++L M
return,, 
Ok,, 
(,, 
orders,,  
),,  !
;,,! "
}-- 
catch.. 
(.. 
	Exception.. 
ex.. 
)..  
{// 
return00 

StatusCode00 !
(00! "
$num00" %
,00% &
$"00' )
$str00) @
{00@ A
ex00A C
.00C D
Message00D K
}00K L
"00L M
)00M N
;00N O
}11 
}22 	
[44 	
HttpGet44	 
(44 
$str44 
)44  
]44  !
public55 
ActionResult55 
<55 
List55  
<55  !
User55! %
>55% &
>55& '
GetRegularUsers55( 7
(557 8
)558 9
{66 	
try77 
{88 
var99 
regularUsers99  
=99! ""
_adminDashboardService99# 9
.999 :
GetRegularUsers99: I
(99I J
)99J K
;99K L
return:: 
Ok:: 
(:: 
regularUsers:: &
)::& '
;::' (
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 
return>> 

StatusCode>> !
(>>! "
$num>>" %
,>>% &
$">>' )
$str>>) @
{>>@ A
ex>>A C
.>>C D
Message>>D K
}>>K L
">>L M
)>>M N
;>>N O
}?? 
}@@ 	
[BB 	
HttpGetBB	 
(BB 
$strBB  
)BB  !
]BB! "
publicCC 
ActionResultCC 
<CC 

DictionaryCC &
<CC& '
DateTimeCC' /
,CC/ 0
intCC1 4
>CC4 5
>CC5 6 
GetTotalOrdersPerDayCC7 K
(CCK L
DateTimeCCL T
	startDateCCU ^
,CC^ _
DateTimeCC` h
endDateCCi p
)CCp q
{DD 	
tryEE 
{FF 
varGG 
ordersPerDayGG  
=GG! ""
_adminDashboardServiceGG# 9
.GG9 : 
GetTotalOrdersPerDayGG: N
(GGN O
	startDateGGO X
,GGX Y
endDateGGZ a
)GGa b
;GGb c
returnHH 
OkHH 
(HH 
ordersPerDayHH &
)HH& '
;HH' (
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
returnLL 

StatusCodeLL !
(LL! "
$numLL" %
,LL% &
$"LL' )
$strLL) @
{LL@ A
exLLA C
.LLC D
MessageLLD K
}LLK L
"LLL M
)LLM N
;LLN O
}MM 
}NN 	
[PP 	
HttpGetPP	 
(PP 
$strPP !
)PP! "
]PP" #
publicQQ 
ActionResultQQ 
<QQ 

DictionaryQQ &
<QQ& '
stringQQ' -
,QQ- .

DictionaryQQ/ 9
<QQ9 :
DateTimeQQ: B
,QQB C
intQQD G
>QQG H
>QQH I
>QQI J'
GetMenuItemCountsByCategoryQQK f
(QQf g
stringQQg m
categoryQQn v
,QQv w
DateTime	QQx Ä
	startDate
QQÅ ä
,
QQä ã
DateTime
QQå î
endDate
QQï ú
)
QQú ù
{RR 	
trySS 
{TT 
varUU 
menuItemCountsUU "
=UU# $"
_adminDashboardServiceUU% ;
.UU; <'
GetMenuItemCountsByCategoryUU< W
(UUW X
categoryUUX `
,UU` a
	startDateUUb k
,UUk l
endDateUUm t
)UUt u
;UUu v
returnVV 
OkVV 
(VV 
menuItemCountsVV (
)VV( )
;VV) *
}WW 
catchXX 
(XX 
	ExceptionXX 
exXX 
)XX  
{YY 
returnZZ 

StatusCodeZZ !
(ZZ! "
$numZZ" %
,ZZ% &
$"ZZ' )
$strZZ) @
{ZZ@ A
exZZA C
.ZZC D
MessageZZD K
}ZZK L
"ZZL M
)ZZM N
;ZZN O
}[[ 
}\\ 	
[^^ 	
HttpGet^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 
ActionResult__ 
<__ 

Dictionary__ &
<__& '
DateTime__' /
,__/ 0
decimal__1 8
>__8 9
>__9 :
GetRevenueReports__; L
(__L M
string__M S
period__T Z
)__Z [
{`` 	
tryaa 
{bb 
varcc 
revenueReportscc "
=cc# $"
_adminDashboardServicecc% ;
.cc; <
GetRevenueReportscc< M
(ccM N
periodccN T
)ccT U
;ccU V
returndd 
Okdd 
(dd 
revenueReportsdd (
)dd( )
;dd) *
}ee 
catchff 
(ff 
	Exceptionff 
exff 
)ff  
{gg 
returnhh 

StatusCodehh !
(hh! "
$numhh" %
,hh% &
$"hh' )
$strhh) @
{hh@ A
exhhA C
.hhC D
MessagehhD K
}hhK L
"hhL M
)hhM N
;hhN O
}ii 
}jj 	
[ll 	
HttpGetll	 
(ll 
$strll "
)ll" #
]ll# $
publicmm 
ActionResultmm 
<mm 
Listmm  
<mm  !
MenuItemmm! )
>mm) *
>mm* +
GetTopSellingItemsmm, >
(mm> ?
stringmm? E
periodmmF L
)mmL M
{nn 	
tryoo 
{pp 
varqq 
topSellingItemsqq #
=qq$ %"
_adminDashboardServiceqq& <
.qq< =
GetTopSellingItemsqq= O
(qqO P
periodqqP V
)qqV W
;qqW X
returnrr 
Okrr 
(rr 
topSellingItemsrr )
)rr) *
;rr* +
}ss 
catchtt 
(tt 
	Exceptiontt 
extt 
)tt  
{uu 
returnvv 

StatusCodevv !
(vv! "
$numvv" %
,vv% &
$"vv' )
$strvv) @
{vv@ A
exvvA C
.vvC D
MessagevvD K
}vvK L
"vvL M
)vvM N
;vvN O
}ww 
}xx 	
[zz 	
HttpGetzz	 
(zz 
$strzz $
)zz$ %
]zz% &
public{{ 
ActionResult{{ 
<{{ 
List{{  
<{{  !
User{{! %
>{{% &
>{{& '$
GetUsersByOrderFrequency{{( @
({{@ A
string{{A G
period{{H N
){{N O
{|| 	
try}} 
{~~ 
var !
usersByOrderFrequency )
=* +"
_adminDashboardService, B
.B C$
GetUsersByOrderFrequencyC [
([ \
period\ b
)b c
;c d
return
ÄÄ 
Ok
ÄÄ 
(
ÄÄ #
usersByOrderFrequency
ÄÄ /
)
ÄÄ/ 0
;
ÄÄ0 1
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
ex
ÇÇ 
)
ÇÇ  
{
ÉÉ 
return
ÑÑ 

StatusCode
ÑÑ !
(
ÑÑ! "
$num
ÑÑ" %
,
ÑÑ% &
$"
ÑÑ' )
$str
ÑÑ) @
{
ÑÑ@ A
ex
ÑÑA C
.
ÑÑC D
Message
ÑÑD K
}
ÑÑK L
"
ÑÑL M
)
ÑÑM N
;
ÑÑN O
}
ÖÖ 
}
ÜÜ 	
[
àà 	
HttpGet
àà	 
(
àà 
$str
àà $
)
àà$ %
]
àà% &
public
ââ 
ActionResult
ââ 
<
ââ 

Dictionary
ââ &
<
ââ& '
DateTime
ââ' /
,
ââ/ 0
decimal
ââ1 8
>
ââ8 9
>
ââ9 :"
GetAverageOrderValue
ââ; O
(
ââO P
string
ââP V
period
ââW ]
)
ââ] ^
{
ää 	
try
ãã 
{
åå 
var
çç 
averageOrderValue
çç %
=
çç& '$
_adminDashboardService
çç( >
.
çç> ?"
GetAverageOrderValue
çç? S
(
ççS T
period
ççT Z
)
ççZ [
;
çç[ \
return
éé 
Ok
éé 
(
éé 
averageOrderValue
éé +
)
éé+ ,
;
éé, -
}
èè 
catch
êê 
(
êê 
	Exception
êê 
ex
êê 
)
êê  
{
ëë 
return
íí 

StatusCode
íí !
(
íí! "
$num
íí" %
,
íí% &
$"
íí' )
$str
íí) @
{
íí@ A
ex
ííA C
.
ííC D
Message
ííD K
}
ííK L
"
ííL M
)
ííM N
;
ííN O
}
ìì 
}
îî 	
}
òò 
}ôô ‹
)D:\Hotpot\WebApplication1\ActionFilter.cs
	namespace 	
WebApplication1
 
{ 
public 

class 
ActionFilter 
: 
IActionFilter ,
{ 
private 
static 
readonly 
ILog  $
_logger% ,
=- .

LogManager/ 9
.9 :
	GetLogger: C
(C D
typeofD J
(J K
ActionFilterK W
)W X
)X Y
;Y Z
public

 

void

 
OnActionExecuting

 !
(

! ""
ActionExecutingContext

" 8
context

9 @
)

@ A
{ 
var 

methodName 
= 
context  
.  !
ActionDescriptor! 1
.1 2
DisplayName2 =
;= >
var 

httpMethod 
= 
context  
.  !
HttpContext! ,
., -
Request- 4
.4 5
Method5 ;
;; <
_logger 
. 
Info 
( 
$" 
$str &
{& '

methodName' 1
}1 2
$str2 B
{B C

httpMethodC M
}M N
$strN X
"X Y
)Y Z
;Z [
} 
public 

void 
OnActionExecuted  
(  !!
ActionExecutedContext! 6
context7 >
)> ?
{ 
var 

methodName 
= 
context  
.  !
ActionDescriptor! 1
.1 2
DisplayName2 =
;= >
var 

httpMethod 
= 
context  
.  !
HttpContext! ,
., -
Request- 4
.4 5
Method5 ;
;; <
_logger 
. 
Info 
( 
$" 
$str &
{& '

methodName' 1
}1 2
$str2 B
{B C

httpMethodC M
}M N
$strN V
"V W
)W X
;X Y
} 
} 
} 